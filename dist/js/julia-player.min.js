!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):e(jQuery)}(function(e){"use strict";function n(){var e=document.createElement("input");return e.setAttribute("type","range"),"text"!==e.type}function t(e,n){var t=Array.prototype.slice.call(arguments,2);return setTimeout(function(){return e.apply(null,t)},n)}function i(e,n){return n=n||100,function(){if(!e.debouncing){var t=Array.prototype.slice.apply(arguments);e.lastReturnVal=e.apply(window,t),e.debouncing=!0}return clearTimeout(e.debounceTimeout),e.debounceTimeout=setTimeout(function(){e.debouncing=!1},n),e.lastReturnVal}}function o(e){return e&&(0===e.offsetWidth||0===e.offsetHeight||e.open===!1)}function s(e){for(var n=[],t=e.parentNode;o(t);)n.push(t),t=t.parentNode;return n}function a(e,n){function t(e){"undefined"!=typeof e.open&&(e.open=!e.open)}var i=s(e),o=i.length,a=[],l=e[n];if(o){for(var r=0;r<o;r++)a[r]=i[r].style.cssText,i[r].style.setProperty?i[r].style.setProperty("display","block","important"):i[r].style.cssText+=";display: block !important",i[r].style.height="0",i[r].style.overflow="hidden",i[r].style.visibility="hidden",t(i[r]);l=e[n];for(var u=0;u<o;u++)i[u].style.cssText=a[u],t(i[u])}return l}function l(e,n){var t=parseFloat(e);return Number.isNaN(t)?n:t}function r(e){return e.charAt(0).toUpperCase()+e.substr(1)}function u(n,o){if(this.$window=e(window),this.$document=e(document),this.$element=e(n),this.options=e.extend({},v,o),this.polyfill=this.options.polyfill,this.orientation=this.$element[0].getAttribute("data-orientation")||this.options.orientation,this.onInit=this.options.onInit,this.onSlide=this.options.onSlide,this.onSlideEnd=this.options.onSlideEnd,this.DIMENSION=h.orientation[this.orientation].dimension,this.DIRECTION=h.orientation[this.orientation].direction,this.DIRECTION_STYLE=h.orientation[this.orientation].directionStyle,this.COORDINATE=h.orientation[this.orientation].coordinate,this.polyfill&&c)return!1;this.identifier="js-"+d+"-"+p++,this.startEvent=this.options.startEvent.join("."+this.identifier+" ")+"."+this.identifier,this.moveEvent=this.options.moveEvent.join("."+this.identifier+" ")+"."+this.identifier,this.endEvent=this.options.endEvent.join("."+this.identifier+" ")+"."+this.identifier,this.toFixed=(this.step+"").replace(".","").length-1,this.$fill=e('<div class="'+this.options.fillClass+'" />'),this.$handle=e('<div class="'+this.options.handleClass+'" />'),this.$range=e('<div class="'+this.options.rangeClass+" "+this.options[this.orientation+"Class"]+'" id="'+this.identifier+'" />').insertAfter(this.$element).prepend(this.$fill,this.$handle),this.$element.css({position:"absolute",width:"1px",height:"1px",overflow:"hidden",opacity:"0"}),this.handleDown=e.proxy(this.handleDown,this),this.handleMove=e.proxy(this.handleMove,this),this.handleEnd=e.proxy(this.handleEnd,this),this.init();var s=this;this.$window.on("resize."+this.identifier,i(function(){t(function(){s.update(!1,!1)},300)},20)),this.$document.on(this.startEvent,"#"+this.identifier+":not(."+this.options.disabledClass+")",this.handleDown),this.$element.on("change."+this.identifier,function(e,n){if(!n||n.origin!==s.identifier){var t=e.target.value,i=s.getPositionFromValue(t);s.setPosition(i)}})}Number.isNaN=Number.isNaN||function(e){return"number"==typeof e&&e!==e};var d="rangeslider",p=0,c=n(),v={polyfill:!0,orientation:"horizontal",rangeClass:"rangeslider",disabledClass:"rangeslider--disabled",horizontalClass:"rangeslider--horizontal",verticalClass:"rangeslider--vertical",fillClass:"rangeslider__fill",handleClass:"rangeslider__handle",startEvent:["mousedown","touchstart","pointerdown"],moveEvent:["mousemove","touchmove","pointermove"],endEvent:["mouseup","touchend","pointerup"]},h={orientation:{horizontal:{dimension:"width",direction:"left",directionStyle:"left",coordinate:"x"},vertical:{dimension:"height",direction:"top",directionStyle:"bottom",coordinate:"y"}}};return u.prototype.init=function(){this.update(!0,!1),this.onInit&&"function"==typeof this.onInit&&this.onInit()},u.prototype.update=function(e,n){e=e||!1,e&&(this.min=l(this.$element[0].getAttribute("min"),0),this.max=l(this.$element[0].getAttribute("max"),100),this.value=l(this.$element[0].value,Math.round(this.min+(this.max-this.min)/2)),this.step=l(this.$element[0].getAttribute("step"),1)),this.handleDimension=a(this.$handle[0],"offset"+r(this.DIMENSION)),this.rangeDimension=a(this.$range[0],"offset"+r(this.DIMENSION)),this.maxHandlePos=this.rangeDimension-this.handleDimension,this.grabPos=this.handleDimension/2,this.position=this.getPositionFromValue(this.value),this.$element[0].disabled?this.$range.addClass(this.options.disabledClass):this.$range.removeClass(this.options.disabledClass),this.setPosition(this.position,n)},u.prototype.handleDown=function(e){if(this.$document.on(this.moveEvent,this.handleMove),this.$document.on(this.endEvent,this.handleEnd),!((" "+e.target.className+" ").replace(/[\n\t]/g," ").indexOf(this.options.handleClass)>-1)){var n=this.getRelativePosition(e),t=this.$range[0].getBoundingClientRect()[this.DIRECTION],i=this.getPositionFromNode(this.$handle[0])-t,o="vertical"===this.orientation?this.maxHandlePos-(n-this.grabPos):n-this.grabPos;this.setPosition(o),n>=i&&n<i+this.handleDimension&&(this.grabPos=n-i)}},u.prototype.handleMove=function(e){e.preventDefault();var n=this.getRelativePosition(e),t="vertical"===this.orientation?this.maxHandlePos-(n-this.grabPos):n-this.grabPos;this.setPosition(t)},u.prototype.handleEnd=function(e){e.preventDefault(),this.$document.off(this.moveEvent,this.handleMove),this.$document.off(this.endEvent,this.handleEnd),this.$element.trigger("change",{origin:this.identifier}),this.onSlideEnd&&"function"==typeof this.onSlideEnd&&this.onSlideEnd(this.position,this.value)},u.prototype.cap=function(e,n,t){return e<n?n:e>t?t:e},u.prototype.setPosition=function(e,n){var t,i;void 0===n&&(n=!0),t=this.getValueFromPosition(this.cap(e,0,this.maxHandlePos)),i=this.getPositionFromValue(t),this.$fill[0].style[this.DIMENSION]=i+this.grabPos+"px",this.$handle[0].style[this.DIRECTION_STYLE]=i+"px",this.setValue(t),this.position=i,this.value=t,n&&this.onSlide&&"function"==typeof this.onSlide&&this.onSlide(i,t)},u.prototype.getPositionFromNode=function(e){for(var n=0;null!==e;)n+=e.offsetLeft,e=e.offsetParent;return n},u.prototype.getRelativePosition=function(e){var n=r(this.COORDINATE),t=this.$range[0].getBoundingClientRect()[this.DIRECTION],i=0;return"undefined"!=typeof e["page"+n]?i=e["page"+n]:"undefined"!=typeof e.originalEvent["client"+n]?i=e.originalEvent["client"+n]:e.originalEvent.touches&&e.originalEvent.touches[0]&&"undefined"!=typeof e.originalEvent.touches[0]["page"+n]?i=e.originalEvent.touches[0]["page"+n]:e.currentPoint&&"undefined"!=typeof e.currentPoint[this.COORDINATE]&&(i=e.currentPoint[this.COORDINATE]),i-t},u.prototype.getPositionFromValue=function(e){var n,t;return n=(e-this.min)/(this.max-this.min),t=Number.isNaN(n)?0:n*this.maxHandlePos},u.prototype.getValueFromPosition=function(e){var n,t;return n=e/(this.maxHandlePos||1),t=this.step*Math.round(n*(this.max-this.min)/this.step)+this.min,Number(t.toFixed(this.toFixed))},u.prototype.setValue=function(e){e===this.value&&""!==this.$element[0].value||this.$element.val(e).trigger("input",{origin:this.identifier})},u.prototype.destroy=function(){this.$document.off("."+this.identifier),this.$window.off("."+this.identifier),this.$element.off("."+this.identifier).removeAttr("style").removeData("plugin_"+d),this.$range&&this.$range.length&&this.$range[0].parentNode.removeChild(this.$range[0])},e.fn[d]=function(n){var t=Array.prototype.slice.call(arguments,1);return this.each(function(){var i=e(this),o=i.data("plugin_"+d);o||i.data("plugin_"+d,o=new u(this,n)),"string"==typeof n&&o[n].apply(o,t)})},"rangeslider.js is available in jQuery context e.g $(selector).rangeslider(options);"});var Julia=function(e){var n=this;e="undefined"==typeof e?{}:e;var t="julia";dir=$('script[src*="julia-player"], script[src*="julia-base"]').attr("src"),name=dir.split("/").pop(),t=dir.replace("/js/"+name,""),t=t.replace("src","dist");var i=Math.floor(1e7*Math.random()+1);return n.options={source:!1,autoplay:!1,volume:25,element:$("video"),muted:!1,width:512,height:288,debug:!1,debugPlayback:!1,force:!1,live:!1,responsive:!0,dimensions:[[1920,1080],[1280,720],[960,540],[640,360],[512,288]],pauseOnClick:!1,poster:"",hlsConfig:{debug:!1},dashConfig:{},suggest:[],suggestLimit:2,suggestTimeout:1e4,themePath:t+"/css/themes",pluginPath:t+"/js/lib",require:[],theme:"default",i18n:{liveText:"Live"},onTime:{},triggerHls:{},triggerDash:{},onPlay:!1,onPause:!1,onStop:!1,onPosition:!1,onSuggest:!1},n.env={element:n.options.element,instance:{},ID:i,api:{},model:{container:"",shield:"",toolbar:"",poster:"",suggest:"",preloader:"",buttons:{bigPlay:"",play:"",sound:"",fullscreen:""},ranges:{volume:"",progress:""},panels:{live:"",currentTime:"",duration:""}},isLive:!1,hls:{},dash:{},canPlayMedia:"",canPlayMediaString:"",isHls:!1,isDash:!1,useHlsLib:!1,source:"",duration:0,apiOk:!1,onTimeRised:[],seeking:!1,dimensions:{width:0,height:0},started:!1,publicApi:{},suggestPointer:0,suggestClicked:!1,progressStep:.01},n.Base={},n.Base.debug=function(e){if(n.options.debug===!0&&window.console)for(d in e)console.log(" - [instance: "+n.env.ID+"] "+d+" ["+typeof e[d]+"]",e[d])},n.Base.stats=function(){return{isDash:n.env.isDash,isHls:n.env.isHls,useHlsLib:n.env.useHlsLib,live:n.env.isLive,canPlayMediaString:n.env.canPlayMediaString,canPlayMedia:n.env.canPlayMedia}},n.Ui=new n._Ui(n),n.Api=new n._Api(n),n.Support=new n._Support(n),n.Controls=new n._Controls(n),n.Timecode=new n._Timecode(n),n.Events=new n._Events(n),n.Persist=new n._Persist(n),n.Fullscreen=new n._Fullscreen(n),n.Callback=new n._Callback(n),n.Suggest=new n._Suggest(n),n.Inject=new n._Inject(n),n.Require=new n._Require(n),n.Boot=new n._Boot(n),n.Loader=new n._Loader(n),$.extend(!0,n.options,e),n.options.debug===!0&&window.console&&console.info("=== Julia console debug start, instance "+n.env.ID+" ==="),n.Require.css([t+"/css/julia-player.min.css",n.options.themePath+"/"+n.options.theme+"/julia.css"]),n.Require.js(n.options.require),$("body").on("julia.plugins-loaded julia.no-plugins","#julia-player-"+n.env.ID,function(e){"plugins-loaded"==e.namespace?n.Base.debug({"Required plugins loaded":[e.type,e.namespace]}):n.Base.debug({"No plugins required":[e.type,e.namespace]}),n.Ui.state(n.env.model.preloader,"on",""),n.env.model.buttons.bigPlay.show()}),n.Boot.run(),n.env.publicApi={options:n.options,shield:n.env.model.shield,toolbar:n.env.model.toolbar,api:n.env.api,ID:n.env.ID,dimensions:n.env.dimensions,Controls:n.Controls,Extend:n.Base.extend,Support:n.Support,Timecode:n.Timecode,Require:n.Require,Inject:n.Inject,stats:n.Base.stats},n.env.publicApi};Julia.prototype._Api=function(e){var n=this;n.create=function(){$("#julia-api-"+e.env.ID).remove(),apiElement=$('<video class="julia-video" id="julia-api-'+e.env.ID+'" preload="auto"></video>'),e.env.instance.prepend(apiElement),e.env.api=document.getElementById("julia-api-"+e.env.ID),e.env.api.controls=!1,e.env.apiOk=!0,e.Base.debug({apiId:e.env.ID,api:e.env.api})},n.source=function(){protoSource=e.env.element.prop("src")?e.env.element.prop("src"):e.env.element.find("source").prop("src"),e.env.source=e.options.source&&e.options.source.length>0?e.options.source:protoSource,e.env.isHls=e.env.source.indexOf(".m3u8")!=-1,"hls"===e.options.force&&(e.env.isHls=!0),e.env.isDash=!e.env.source.indexOf(".mpd")&&e.env.source.indexOf(".ism")!=-1,"dash"===e.options.force&&(e.env.isDash=!0),e.Base.debug({"Api source isHls":e.env.isHls,"Api source isDash":e.env.isDash,Source:e.env.source}),e.env.model.poster=e.options.poster&&e.options.poster.length>0?e.options.poster:e.env.element.prop("poster"),e.Ui.posterSet()},n.allowStart=function(n){e.Controls.press("setDuration",{duration:e.Timecode.toHuman(e.env.duration)}),e.options.muted===!0?e.Controls.press("sound-off"):(e.Controls.press("sound-on"),e.Controls.press("volume",{volume:e.options.volume})),e.options.autoplay===!0&&e.Support.isMobile()===!1&&e.Controls.press("play"),e.Base.debug({eventType:n.type,duration:e.env.api.duration,readyState:e.env.api.readyState})},n.canplaythrough=function(){e.env.started===!1&&(e.env.api.readyState>=3||e.Support.isMobile()===!0&&e.env.api.readyState>=2?e.Api.allowStart({type:"origin.Events.canplaythrough"}):setTimeout(function(){e.Api.canplaythrough()},250))}},Julia.prototype._Ui=function(e){var n=this;n.create=function(){e.env.instance.length>0&&(e.env.instance.remove(),e.env.instance={}),e.env.instance=$('<div class="julia-player julia-fullscreen-off julia-theme-'+e.options.theme+'" id="julia-player-'+e.env.ID+'"></div>'),e.env.model.shield=$('<div class="julia-shield" id="julia-shield-'+e.env.ID+'"></div>'),e.env.model.preloader=$('<div class="julia-preloader"><div class="julia-preloader-run"></div></div>'),e.env.model.suggest=$('<div class="julia-suggest" id="julia-suggest-'+e.env.ID+'"></div>'),e.env.model.toolbar=$('<div class="julia-toolbar" id="julia-toolbar-'+e.env.ID+'"></div>'),e.env.model.buttons.bigPlay=$('<button class="julia-btn julia-big-play"><i class="julia-icon julia-play-circle"></i></button>'),e.env.model.buttons.play=$('<button class="julia-btn julia-playback play">    <i class="julia-icon julia-play"></i></button>'),e.env.model.buttons.sound=$('<button class="julia-btn julia-sound on">    <i class="julia-icon julia-sound-on"></i></button>'),e.env.model.buttons.fullscreen=$('<button class="julia-btn julia-fullscreen-toggle on">    <i class="julia-icon julia-fullscreen"></i></button>'),e.env.model.ranges.volume=$('<div class="julia-volume">  <input type="range" value="'+e.options.volume+'" min="0" max="100" step="1" class="julia-range"></div>'),e.env.model.ranges.progress=$('<div class="julia-progress">  <input type="range" value="0" min="0" max="100" step="'+e.env.progressStep+'" class="julia-range"></div>'),e.env.model.panels.live=$('<div class="julia-panel julia-live-indicator">    <span>'+e.options.i18n.liveText+"</span></div>"),e.env.model.panels.currentTime=$('<div class="julia-panel julia-currentTime">    <span>00:00:00</span>&nbsp;/&nbsp;</div>'),e.env.model.panels.duration=$('<div class="julia-panel julia-duration">    <span>00:00:00</span></div>'),e.env.model.shield.append([e.env.model.preloader,e.env.model.buttons.bigPlay]),e.env.model.toolbar.append([e.env.model.ranges.progress,e.env.model.panels.live,e.env.model.panels.currentTime,e.env.model.panels.duration,e.env.model.buttons.play,e.env.model.buttons.sound,e.env.model.ranges.volume,e.env.model.buttons.fullscreen]),e.env.instance.append([e.env.model.shield,e.env.model.suggest,e.env.model.toolbar]),e.env.element.hide(),e.env.model.toolbar.hide(),e.env.model.buttons.bigPlay.hide(),e.Ui.state(e.env.model.preloader,"","on"),e.env.instance.insertAfter(e.env.element),$("#julia-toolbar-"+e.env.ID+">div.julia-progress>input, #julia-toolbar-"+e.env.ID+">div.julia-volume>input").rangeslider({polyfill:!1,rangeClass:"julia-rangeslider",disabledClass:"julia-rangeslider--disabled",horizontalClass:"julia-rangeslider--horizontal",verticalClass:"julia-rangeslider--vertical",fillClass:"julia-rangeslider__fill",handleClass:"julia-rangeslider__handle",onInit:function(){},onSlide:function(e,n){},onSlideEnd:function(e,n){}}),e.Base.debug({playerInstance:e.env.instance})},n.icon=function(e,n,t){e.find("i").removeClass(n).addClass(t)},n.state=function(e,n,t){e.removeClass(n).addClass(t)},n.progress=function(e,n){e.find('input[type="range"]').val(n).rangeslider("update",!0)},n.panel=function(e,n){e.find("span").text(n)},n.posterSet=function(){n.posterUnset(),e.env.model.poster.length>0&&(img=$('<img src="'+e.env.model.poster+'" width="100%" height="100%">'),e.env.model.shield.append(img),e.Base.debug({poster:e.env.model.poster}))},n.posterUnset=function(){e.env.model.shield.find("img").remove()}},Julia.prototype._Events=function(e){var n=this;n.ui=function(){e.env.model.toolbar.on("contextmenu",function(e){e.preventDefault()}).on("click",".julia-playback.play",function(n){n.preventDefault(),e.Controls.press("play")}).on("click",".julia-playback.pause",function(n){n.preventDefault(),e.Controls.press("pause")}).on("click",".julia-sound.on",function(n){n.preventDefault(),e.Controls.press("sound-off")}).on("click",".julia-sound.off",function(n){n.preventDefault(),e.Controls.press("sound-on")}).on("click",".julia-fullscreen-toggle.on",function(n){n.preventDefault(),e.Controls.press("fullscreen-on")}).on("click",".julia-fullscreen-toggle.off",function(n){n.preventDefault(),e.Controls.press("fullscreen-off")}),e.env.model.shield.on("click contextmenu",".julia-big-play",function(n){n.preventDefault(),n.stopPropagation(),"click"==n.type&&(e.env.started===!1?e.Loader.init():e.Controls.press("play"))}),e.env.model.shield.on("click contextmenu",function(n){n.preventDefault(),n.stopPropagation(),e.options.pauseOnClick===!0&&e.Support.isMobile()===!1&&"click"==n.type&&e.Controls.press("pause")});var n;e.env.instance.on("mousemove","#julia-shield-"+e.env.ID+", #julia-suggest-"+e.env.ID,function(t){t.preventDefault(),e.env.model.toolbar.addClass("julia-toolbar-visible"),clearTimeout(n),n=setTimeout(function(){e.env.model.toolbar.removeClass("julia-toolbar-visible")},1750)}).on("mouseover mousemove mouseout","#julia-toolbar-"+e.env.ID+".julia-toolbar-visible",function(t){t.preventDefault(),e.env.model.toolbar.addClass("julia-toolbar-visible"),clearTimeout(n),"mouseout"==t.type&&(n=setTimeout(function(n){e.env.model.toolbar.removeClass("julia-toolbar-visible")},1750))}),e.env.model.toolbar.on("change input",".julia-progress>input",function(n){"input"==n.type?e.env.seeking=!0:(seekTo=e.Timecode.toSeconds($(this).val()),seekTo=seekTo>=e.env.duration?e.env.duration:seekTo.toFixed(2),e.Controls.press("goto",{currentTime:seekTo}),e.env.seeking=!1)}),e.env.model.toolbar.on("change",".julia-volume>input",function(){e.Controls.press("volume",{volume:$(this).val(),event:"slideChange"})}),$(window).on("resize",function(){e.Support.resize()}),$(document).on("webkitfullscreenchange mozfullscreenchange fullscreenchange MSFullscreenChange",function(n){document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement?(e.Ui.state(e.env.instance,"julia-fullscreen-off","julia-fullscreen-on"),e.Ui.state(e.env.model.buttons.fullscreen,"on","off"),e.Ui.icon(e.env.model.buttons.fullscreen,"julia-fullscreen","julia-fullscreen-exit"),e.Support.isMobile()&&(screen.orientation.lock("landscape-primary"),screen.msLockOrientation.lock("landscape-primary"),screen.mozLockOrientation.lock("landscape-primary")),e.Base.debug({"fullscreen on":"#julia-player-"+e.env.ID})):(e.Ui.state(e.env.instance,"julia-fullscreen-on","julia-fullscreen-off"),e.Ui.state(e.env.model.buttons.fullscreen,"off","on"),e.Ui.icon(e.env.model.buttons.fullscreen,"julia-fullscreen-exit","julia-fullscreen"),e.Support.isMobile()&&(screen.orientation.unlock(),screen.msLockOrientation.unlock(),screen.mozLockOrientation.unlock()),e.Base.debug({"fullscreen off":"#julia-player-"+e.env.ID}),e.Support.resize())})},n.native=function(){e.Support.forceReady()===!0&&e.env.isHls===!0?e.Api.canplaythrough():e.env.api.oncanplaythrough=function(n){e.env.duration=e.env.api.duration,e.env.started===!1&&e.env.api.readyState>=3&&e.Api.allowStart(n)},e.env.api.onplay=function(n){e.Ui.state(e.env.model.buttons.play,"play","pause"),e.Ui.icon(e.env.model.buttons.play,"julia-play","julia-pause"),e.env.model.buttons.bigPlay.hide(),e.env.model.toolbar.show()},e.env.api.onplaying=function(n){e.Ui.state(e.env.model.buttons.play,"play","pause"),e.Ui.icon(e.env.model.buttons.play,"julia-play","julia-pause"),e.env.model.buttons.bigPlay.hide(),e.Ui.state(e.env.model.preloader,"on",""),e.env.model.suggest.html(""),e.Ui.state(e.env.model.suggest,"on",""),e.Ui.posterUnset(),e.env.model.toolbar.show(),e.Controls.press("setDuration",{duration:e.Timecode.toHuman(e.env.duration)}),e.env.started=!0},e.env.api.onpause=function(n){e.Ui.state(e.env.model.buttons.play,"pause","play"),e.Ui.icon(e.env.model.buttons.play,"julia-pause","julia-play"),e.env.model.buttons.bigPlay.show()},e.env.api.onerror=function(e){},e.env.api.onemptied=function(e){},e.env.api.onstalled=function(e){},e.env.api.onsuspend=function(e){},e.env.api.ontimeupdate=function(n){e.env.seeking===!1&&(currentTimeReadable=e.Timecode.toHuman(e.env.api.currentTime.toFixed(2)),e.Ui.progress(e.env.model.ranges.progress,e.Timecode.toPercents(e.env.api.currentTime.toFixed(2))),e.Ui.panel(e.env.model.panels.currentTime,currentTimeReadable)),e.Callback.onTime(currentTimeReadable,e.env.api.currentTime),e.options.debugPlayback===!0&&e.Base.debug({"duration/current":e.env.duration+"/"+e.env.api.currentTime.toFixed(2)+" > "+currentTimeReadable})},e.env.api.seeked=function(n){e.env.seeking=!1},e.env.api.seeking=function(n){e.env.seeking=!0},e.env.api.onvolumechange=function(n){e.env.api.muted===!1?e.Ui.progress(e.env.model.ranges.volume,100*e.env.api.volume):e.Ui.progress(e.env.model.ranges.volume,0)},e.env.api.ondurationchange=function(n){e.env.duration=e.env.api.duration,e.env.started===!1&&(e.env.duration=e.env.api.duration,e.env.seeking=!1,e.Base.debug({duration:e.env.duration,readyState:e.env.api.readyState,started:e.env.started}))},e.env.api.onended=function(n){e.Suggest.run()}},n.hlsLibEvents=function(){e.env.hls.on(Hls.Events.ERROR,function(n,t){switch(t.details){case Hls.ErrorDetails.MANIFEST_LOAD_ERROR:case Hls.ErrorDetails.MANIFEST_LOAD_TIMEOUT:case Hls.ErrorDetails.MANIFEST_PARSING_ERROR:case Hls.ErrorDetails.LEVEL_LOAD_ERROR:case Hls.ErrorDetails.LEVEL_LOAD_TIMEOUT:case Hls.ErrorDetails.LEVEL_SWITCH_ERROR:case Hls.ErrorDetails.FRAG_LOAD_ERROR:case Hls.ErrorDetails.FRAG_LOOP_LOADING_ERROR:case Hls.ErrorDetails.FRAG_LOAD_TIMEOUT:case Hls.ErrorDetails.FRAG_DECRYPT_ERROR:case Hls.ErrorDetails.FRAG_PARSING_ERROR:case Hls.ErrorDetails.BUFFER_APPEND_ERROR:case Hls.ErrorDetails.BUFFER_APPENDING_ERROR:e.Base.debug({recoveringError:t.details,errorType:t.type,errorFatal:t.fatal,data:t}),t.fatal===!0&&e.env.tries<11}})},n.dashLibEvents=function(){e.env.dash.on(dashjs.MediaPlayer.events,function(n,t){switch(t.details){case dashjs.MediaPlayer.events.ERROR:e.Base.debug({recoveringError:dashjs.MediaPlayer.events.ERROR})}})}},Julia.prototype._Controls=function(e){var n=this;n.press=function(n,t){switch(t=t||{},e.Base.debug({action:n,"action-data":t}),n){case"play":e.options.onPlay!==!1&&e.Callback.fn(e.options.onPlay,t),e.env.model.buttons.bigPlay.hide(),e.env.api.play();break;case"pause":e.options.onPause!==!1&&e.Callback.fn(e.options.onPause,t),e.env.api.pause();break;case"stop":e.options.onStop!==!1&&e.Callback.fn(e.options.onStop,t),e.env.api.pause(),e.env.api.currentTime=0,e.Ui.state(e.env.model.buttons.play,"pause","play"),e.Ui.icon(e.env.model.buttons.play,"julia-pause","julia-play"),e.env.model.buttons.bigPlay.show(),e.Ui.progress(e.env.model.ranges.progress,0);break;case"goto":e.options.onPosition!==!1&&e.Callback.fn(e.options.onPosition,t),e.env.api.currentTime=t.currentTime;break;case"setDuration":e.Ui.panel(e.env.model.panels.duration,t.duration),e.env.started===!1&&e.Ui.progress(e.env.model.ranges.progress,0),e.Base.debug({setDuration:t.duration});break;case"volume":e.options.volume=t.volume,e.env.api.volume=t.volume/100,e.Base.debug({"volume is":e.env.api.volume}),e.Ui.progress(e.env.model.ranges.volume,t.volume),t.volume>0?e.Controls.press("sound-on"):e.Controls.press("sound-off");break;case"sound-on":e.env.api.muted=!1,e.options.muted=!1,e.Persist.set("julia-player-volume",e.options.volume,999),e.Persist.set("julia-player-muted",e.options.muted,999),e.Ui.state(e.env.model.buttons.sound,"off","on"),e.Ui.icon(e.env.model.buttons.sound,"julia-sound-off","julia-sound-on");break;case"sound-off":e.env.api.muted=!0,e.options.muted=!0,e.Persist.set("julia-player-volume",e.options.volume,999),e.Persist.set("julia-player-muted",e.options.muted,999),e.Ui.state(e.env.model.buttons.sound,"on","off"),e.Ui.icon(e.env.model.buttons.sound,"julia-sound-on","julia-sound-off");break;case"fullscreen-on":e.Fullscreen.on();break;case"fullscreen-off":e.Fullscreen.off()}}},Julia.prototype._Support=function(e){var n=this;n.aspect=function(e,n){return e>0&&n>0?n/e:0},n.isMobile=function(){return!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},n.forceReady=function(){return!!/Firefox/i.test(navigator.userAgent)},n.canPlayMedia=function(){var n=document.createElement("video");return n.id="video-cap-test-"+e.env.ID,e.env.canPlayMediaString=n.canPlayType("application/vnd.apple.mpegURL"),$("#video-cap-test"+e.env.ID).remove(),"probably"==e.env.canPlayMediaString||"maybe"==e.env.canPlayMediaString},n.resize=function(){defaultDim=e.env.element.width()?[e.env.element.width(),e.env.element.height()]:[e.options.width,e.options.height],dimensions=e.options.responsive===!0?n.getSize():defaultDim,e.Base.debug({resizeDefaults:defaultDim,resize:dimensions}),e.env.instance.width(dimensions[0]),e.env.instance.height(dimensions[1]),e.env.dimensions.width=dimensions[0],e.env.dimensions.height=dimensions[1],e.env.api.setAttribute("width","100%"),e.env.api.setAttribute("height","100%")},n.getSize=function(){var t=e.env.element.parent().css("display").toLowerCase();"inline"==t&&e.env.element.parent().css({display:"block"});var o=e.env.element.parent().width();for(i in e.options.dimensions){var s=e.options.dimensions[i];if(o>=s[0])return a=0==n.aspect(o)?s[1]/s[0]:n.aspect(e.env.api.videoWidth,e.env.api.videoHeight),dimensions=[s[0],s[0]*a],e.Base.debug({resizePredefined:dimensions}),dimensions}return a=0==n.aspect()?s[1]/s[0]:n.aspect(e.env.api.videoWidth,e.env.api.videoHeight),dimensions=[o,o*a],e.Base.debug({resizeFallback:dimensions}),dimensions}},Julia.prototype._Suggest=function(e){var n=this;n.run=function(){if(e.env.model.suggest.html(""),e.Controls.press("stop"),e.env.suggestClicked=!1,e.options.suggest.length>0){x=0;for(var n in e.options.suggest)if(x<e.options.suggestLimit&&e.options.suggest[n].played===!1){mode=e.options.suggest[n].live&&e.options.suggest[n].live===!0?"live":"vod",liveText=e.options.suggest[n].liveText?e.options.suggest[n].liveText:"Live";var t=e.options.suggest[n].poster?e.options.suggest[n].poster:"";posterImage=t.length>0?'<img src="'+t+'" width="100%" height="100%">':"",suggestItemWidget=$('<div class="julia-suggest-item" data-poster="'+t+'" data-source="'+e.options.suggest[n].source+'" data-mode="'+mode+'" data-live-text="'+liveText+'" data-index="'+n+'">'+posterImage+'<div class="julia-suggest-item-title">'+e.options.suggest[n].title+"</div></div>"),suggestItemWidget.on("click",function(t){e.options.onSuggest!==!1&&e.Callback.fn(e.options.onSuggest,e.options.suggest[n]),e.options.muted=e.env.api.muted,e.options.poster=$(this).data("poster"),e.env.suggestClicked=!0,e.env.model.buttons.bigPlay.hide(),e.env.started=!1,e.options.source=$(this).data("source"),e.Api.source(),e.options.autoplay=!0,e.options.live="live"==$(this).data("mode"),e.options.i18n.liveText=$(this).data("live-text"),e.Ui.panel(e.env.model.panels.live,e.options.i18n.liveText),e.Base.debug({suggestRemoveIndex:$(this).data("index"),suggestRemove:$(this).data("source")}),e.options.suggest[$(this).data("index")].played=!0,e.Ui.state(e.env.model.suggest,"on",""),e.Loader.init()}),e.env.model.suggest.append(suggestItemWidget),x++}x>0&&(e.options.suggestTimeout>0&&e.Support.isMobile()===!1&&setTimeout(function(){e.env.suggestClicked===!1&&e.env.model.suggest.find("div.julia-suggest-item:first").click()},e.options.suggestTimeout),e.Ui.state(e.env.model.suggest,"","on"))}else e.Fullscreen.off();e.Base.debug({Suggest:"raised"})}},Julia.prototype._Fullscreen=function(e){var n=this;n.on=function(){var n=document.querySelector("#julia-player-"+e.env.ID);n.requestFullscreen?n.requestFullscreen():n.msRequestFullscreen?n.msRequestFullscreen():n.mozRequestFullScreen?n.mozRequestFullScreen():n.webkitRequestFullscreen?n.webkitRequestFullscreen():e.Base.debug({fullscreen:"fullscreen is not supported"})},n.off=function(){document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()}},Julia.prototype._Persist=function(e){var n=this;n.set=function(e,n,t){dateObj=new Date,dateObj.setTime(dateObj.getTime()+24*t*60*60*1e3);var i="expires="+dateObj.toUTCString();document.cookie=e+"="+n+"; "+i+"; path=/"},n.get=function(e){for(var e=e+"=",n=document.cookie.split(";"),t=0;t<n.length;t++){for(var i=n[t];" "==i.charAt(0);)i=i.substring(1);if(0==i.indexOf(e))return i.substring(e.length,i.length)}}},Julia.prototype._Timecode=function(e){var n=this;n.toPercents=function(n){return p=n/e.env.duration*100,p},n.toSeconds=function(n){return t=e.env.duration/100*n,t},n.toNum=function(e){return e=e.split(":"),e.reverse(),s=parseInt(e[0]),m=e.length>1?parseInt(e[1]):0,h=e.length>2?parseInt(e[3]):0,t=s+60*m+60*h*60,t},n.toHuman=function(e){return e=e.toString().split("."),s=e[0],H=Math.floor(s/3600),M=Math.floor((s-3600*H)/60),S=Math.floor(s-3600*H-60*M),H=("0"+H.toString()).slice(-2),M=("0"+M.toString()).slice(-2),S=("0"+S.toString()).slice(-2),str=H>0?H+":"+M+":"+S:M+":"+S,str}},Julia.prototype._Callback=function(e){var n=this;n.fn=function(n,t){t=t||{},$.inArray(typeof n,["string","function","object"])>-1?("string"==typeof n&&(n=window[n]),n(e.options,e.env,t),e.Base.debug({Callback:typeof n+" raised"})):e.Base.debug({Callback:typeof n+" is not a function, but: "+typeof n})},n.onTime=function(n,t){n in e.options.onTime&&e.env.onTimeRised.indexOf(n)==-1&&(f=e.options.onTime[n],e.env.onTimeRised.push(n),$.inArray(typeof f,["string","function","object"])>-1?("string"==typeof f&&(f=window[f]),f(e.options,e.env,n),e.Base.debug({"Callback onTime":n+" "+typeof f+" raised"})):e.Base.debug({"Callback onTime":n+" "+typeof f+" is not a function, but: "+typeof f}))}},Julia.prototype._Inject=function(e){var n=this;n.source=function(n){e.env.started===!0&&e.Controls.press("stop"),$("#julia-player-"+e.env.ID).remove(),e.Boot.run(),$.extend(!0,e.options,n),e.Api.source(),e.options.live===!0?(e.env.isLive=!0,e.Ui.panel(e.env.model.panels.live,e.options.i18n.liveText),e.Ui.state(e.env.model.toolbar,"","live")):(e.env.isLive=!1,e.Ui.panel(e.env.model.panels.live,""),e.Ui.state(e.env.model.toolbar,"live","")),console.warn(e.options.live),e.Loader.init()},n.layer=function(e){}},Julia.prototype._Require=function(e){var n=this;n.js=function(e){if("string"==typeof e&&(e=[e]),0==e.length)n.raiseEvent("julia.no-plugins");else{var t=e[e.length-1];n.load(e,0,t)}},n.raiseEvent=function(t){setTimeout(function(){1==$("#julia-player-"+e.env.ID).length?$("#julia-player-"+e.env.ID).trigger({type:t}):n.raiseEvent(t)},100)},n.load=function(t,i,o){var s=t[i];e.Base.debug({"Require-js request":s}),$.getScript(s).done(function(){e.Base.debug({"Require-js loaded":s}),o==s?n.raiseEvent("julia.plugins-loaded"):n.load(t,i+1,o)})},n.css=function(e){"string"==typeof e&&(e=[e]);for(i in e)$("head").append($('<link rel="stylesheet" type="text/css" href="'+e[i]+'">'))}},Julia.prototype._Boot=function(e){var n=this;n.run=function(){e.Base.debug(e.options),e.env.element=e.options.element;for(i in e.options.suggest)e.options.suggest[i].played=!1;volume=e.Persist.get("julia-player-volume"),muted=e.Persist.get("julia-player-muted"),"undefined"!=typeof volume&&volume.length>0&&(e.options.volume=parseInt(volume),(e.options.volume>100||e.options.volume<0)&&(e.options.volume=25)),"undefined"!=typeof volume&&muted.length>0&&(e.options.muted="false"!=muted),e.Ui.create(),e.Api.create(),e.Api.source(),e.Support.resize(),e.Events.ui(),e.Events.native()}},Julia.prototype._Loader=function(e){var n=this;n.init=function(){e.env.hls=!1,e.env.dash=!1,
e.env.api.src="",e.env.useHlsLib=!1,e.env.isLive=!1,e.env.canPlayMedia=e.Support.canPlayMedia(),e.env.isHls===!0&&(e.env.useHlsLib=!(e.env.canPlayMedia!==!1||!Hls.isSupported())),e.env.useHlsLib===!0?e.env.hls=new Hls(e.options.hlsConfig):e.env.isDash===!0||(e.env.api.src=e.env.source),e.options.live===!0?(e.env.isLive=!0,e.Ui.state(e.env.model.toolbar,"","live")):(e.env.isLive=!1,e.Ui.state(e.env.model.toolbar,"live","")),e.env.useHlsLib===!0?(e.Events.hlsLibEvents(),e.env.hls.autoLevelCapping=-1,e.env.hls.attachMedia(e.env.api),e.env.hls.loadSource(e.env.source),e.env.hls.on(Hls.Events.MEDIA_ATTACHED,function(n,t){e.env.hls.on(Hls.Events.LEVEL_LOADED,function(n,t){t.details.live===!0&&e.options.live===!1?(e.env.isLive=!0,e.Ui.state(e.env.model.toolbar,"","live")):(e.env.isLive=!1,e.Ui.state(e.env.model.toolbar,"live",""))});for(x in e.options.triggerHls)handle=e.options.triggerHls[x],"function"==typeof window[handle]?e.env.hls.on(Hls.Events[x],function(n,t){window[handle](e.env.apiId,n,t)}):e.Base.debug({triggerHlsError:handle+" is not a function"})})):e.env.isDash===!0?(e.env.dash=dashjs.MediaPlayer().create(),e.env.dash.initialize(),e.env.dash.attachView(e.env.api),e.env.dash.attachSource(e.env.source),e.env.dash.setAutoPlay(e.options.autoplay),e.options.debug===!1&&e.env.dash.getDebug().setLogToBrowserConsole(!1),e.Events.dashLibEvents()):e.env.api.load(),e.Ui.state(e.env.model.preloader,"","on"),e.Api.allowStart({type:"origin.Loader"}),e.Controls.press("play")}},$.fn.julia=function(e){return this.each(function(){if(!$(this).data("julia")){e="undefined"==typeof e?{}:e,e.element=$(this);var n=new Julia(e);$(this).data("julia",n)}})},$.fn.play=function(){$(this).data("julia").Controls.press("play")},$.fn.setOptions=function(e){$(this).data("julia").Extend(e)},$.fn.options=function(){return $(this).data("julia").options},$.fn.source=function(e){$(this).data("julia").Inject.source(e)},$.fn.api=function(){return $(this).data("julia").api},$.fn.pause=function(){$(this).data("julia").Controls.press("pause")},$.fn.stop=function(){$(this).data("julia").Controls.press("stop")},$.fn.goto=function(e){$(this).data("julia").Controls.press("goto",{currentTime:e})},$.fn.mute=function(){$(this).data("julia").api.muted===!1?$(this).data("julia").Controls.press("sound-off"):$(this).data("julia").Controls.press("sound-on")},$.fn.volume=function(e){$(this).data("julia").Controls.press("volume",{volume:e})},$.fn.getID=function(){return $(this).data("julia").ID},$.fn.stats=function(){return $(this).data("julia").stats()};
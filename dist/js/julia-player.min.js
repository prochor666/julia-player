!function(e,t){"function"==typeof define&&define.amd?define(["exports","jquery"],function(n,i){t(e.commonJsStrictGlobal=n,i)}):"object"==typeof exports&&"string"!=typeof exports.nodeName?t(exports,require("jquery")):t(e.commonJsStrictGlobal={},e.jQuery)}(this,function(e,n){JuliaPlayer=function(e){var t=this;e=void 0===e?{}:e;var i=Math.floor(1e7*Math.random()+1);return t.options={dev:!1,element:n("body"),autoplay:!1,debug:!1,dashConfig:{},dimensions:[[1920,1080],[1280,720],[960,540],[640,360],[512,288]],hlsConfig:{debug:!1},i18n:{messages:{pluginError:"Plugin error"},liveText:"Live",settings:"Settings",auto:"Auto",video:"Video quality",audio:"Audio quality",audioTracks:"Audio tracks",subtitles:"Subtitles",speed:"Playback speed",speedItems:[{active:1,value:.25,title:"0.25x"},{active:1,value:.5,title:"0.5x"},{active:1,value:1,title:"Normal"},{active:1,value:1.5,title:"1.5x"},{active:1,value:2,title:"2x"},{active:1,value:2.5,title:"2.5x"},{active:1,value:3,title:"3x"}],videoItems:[],audioItems:[],textItems:[{active:-1,value:-1,title:"Off"}]},onInit:!1,onPlay:!1,onPause:!1,onStop:!1,onSuggest:!1,onTime:!1,pauseOnClick:!0,playbackDebug:!1,pluginMode:!1,responsive:!0,plugins:"julia-player/dist/js/lib",source:{file:"",poster:"",link:"",mode:"legacy",live:!1},suggest:[],suggestLimit:4,suggestTimeout:1e4,thumbs:!1,zIndexStart:1,errorRecoveryAttemptLimit:3},n.extend(!0,t.options,e),t.env={element:t.options.element,autoplay:t.options.autoplay,canPlayMediaString:"",canPlayMedia:!1,collection:t.options.collection,context:"undefined"!=typeof window&&window||global,continuePlayback:!1,dimensions:{width:0,height:0},errorRecoveryAttempts:0,errorRecoveryAttemptLimit:t.options.errorRecoveryAttemptLimit,fullscreenFrame:!1,i18n:t.options.i18n,ID:i,instance:n(),api:n(),hls:!1,dash:!1,dashInitialized:!1,hlsInitialized:!1,audioTrackActive:0,textTrackActive:0,shield:n(),toolbars:n(),buttons:n(),started:!1,mode:"legacy",suggestTimer:!1,startupGoto:0,onTimeRised:[],ranges:{volume:"",progress:""},sliders:{volume:"",progress:""},panels:{live:"",currentTime:"",duration:""},labels:{goto:""},menus:{settings:""},suggest:n(),preloader:n(),progressStep:.01,version:"2.0.7"},t.debug=function(e,n){if(!0===t.options.debug&&(n=void 0!==n&&!1!==n,window.console))for(key in e)!0===n&&"function"==typeof console.warn?console.warn(" - JuliaPlayer "+t.env.ID+" warning - ["+typeof e[key]+"], "+key+": ",e[key]):console.log(" - JuliaPlayer "+t.env.ID+" debug - ["+typeof e[key]+"], "+key+": ",e[key])},t.event=function(e,i,o){var s=void 0===i?n(document):i,a=void 0===o?{}:o;"string"==typeof s&&(s=n(s)),t.debug({"Julia event fired":e+" > "+i.prop("tagName")+"."+i.prop("className")}),s.trigger({type:e},a)},t.js=function(e){if("string"==typeof e&&(e=[e]),0==e.length)t.event("julia.no-scripts",t.env.instance);else{var n=e[e.length-1];t.jsLoad(e,0,n)}},t.jsLoad=function(e,i,o){var s=e[i];n.getScript(s).done(function(){t.debug({"Js file loaded":s}),o==s?t.event("julia.scripts-loaded",t.env.instance):t.jsLoad(e,i+1,o)})},t.stats=function(){return{mode:t.options.source.mode,live:t.options.source.live,isMobile:t.Support.isMobile(),readyState:t.env.api.readyState,duration:t.Timecode.toHuman(t.env.api.duration),position:t.Timecode.toHuman(t.env.api.currentTime),canPlayMediaString:t.env.canPlayMediaString,canPlayMedia:t.env.canPlayMedia.toString(),started:t.env.started.toString(),api:!0===t.env.api.paused?"paused":"playing"}},!0===t.options.debug&&window.console&&console.info("=== Julia player init, instance "+t.env.ID+" ==="),n(document).on("julia.ui-created","#julia-"+t.env.ID,function(e){t.Support.resize(),t.Ui.state(t.env.instance,"off","");var i=[];t.options.source.hasOwnProperty("mode")&&"dash"===t.options.source.mode&&void 0===t.env.context.dashjs&&i.push(t.options.plugins+"/dash.all.min.js"),t.options.source.hasOwnProperty("mode")&&"hls"===t.options.source.mode&&void 0===t.env.context.Hls&&i.push(t.options.plugins+"/hls.min.js"),n(document).on("julia.scripts-loaded julia.no-scripts","#julia-"+t.env.ID,function(e){t.options.source.hasOwnProperty("file")||(t.options.source.file=""),t.options.source.hasOwnProperty("poster")||(t.options.source.poster=""),t.options.source.hasOwnProperty("title")||(t.options.source.title=""),t.options.source.hasOwnProperty("mode")||(t.options.source.mode="legacy"),t.options.source.hasOwnProperty("live")||(t.options.source.live=!1),t.env.fullscreenFrame=document.querySelector("#julia-"+t.env.ID),t.env.api=document.getElementById("julia-api-"+t.env.ID),t.env.sliders.progress=new t._Slider(t,{element:n("#julia-"+t.env.ID+" .julia-toolbar.julia-toolbar-bottom>div.julia-progress>input.julia-range"),event:"progress-change"}),t.env.sliders.progress.init(),t.env.sliders.volume=new t._Slider(t,{element:n("#julia-"+t.env.ID+" .julia-toolbar.julia-toolbar-bottom>div.julia-volume>input.julia-range"),event:"volume-change"}),t.env.sliders.volume.init(),t.Events.ui(),t.Support.resize(),t.options.suggest.map(function(e,n){t.options.suggest[n].played=!1}),n("body").on("julia.progress-change","#julia-"+t.env.ID,function(e,n){!1===t.env.started&&(t.env.startupGoto=n.percent,t.Controls.press("play"))}),volume=t.Persist.get("julia-player-volume"),muted=t.Persist.get("julia-player-muted"),isNaN(Number(volume))||"undefined"==typeof volume?t.options.volume=25:(t.options.volume=parseInt(Number(volume)),(t.options.volume>100||t.options.volume<0)&&(t.options.volume=25)),!0===t.Support.isMobile()&&(t.options.volume=100,t.options.muted=!1),isNaN(Number(muted))||"undefined"==typeof muted||!1!==t.Support.isMobile()?t.options.muted=!1:t.options.muted=0!==Number(muted),!1!==t.options.onInit&&t.Callback.fn(t.options.onInit),t.env.api.volume=parseFloat(t.options.volume/100),t.env.api.muted=t.options.muted,t.Source.set()}),t.js(i)}),t.Ui=new t._Ui(t),t.Events=new t._Events(t),t.Switcher=new t._Switcher(t),t.Subtitles=new t._Subtitles(t),t.Callback=new t._Callback(t),t.Controls=new t._Controls(t),t.Fullscreen=new t._Fullscreen(t),t.Support=new t._Support(t),t.Suggest=new t._Suggest(t),t.Source=new t._Source(t),t.Persist=new t._Persist(t),t.Timecode=new t._Timecode(t),t.Thumbs=new t._Thumbs(t),t.Ui.create(),t.Events.init(),!0===t.options.pluginMode?t:[t]},JuliaPlayer.prototype._Callback=function(e){var t=this;t.fn=function(t,i){i=i||{},n.inArray(typeof t,["string","function"])>-1?("string"==typeof t&&(t=window[t]),t(e,i),e.debug({Callback:typeof t+" raised"})):e.debug({Callback:typeof t+" is not a function, but: "+typeof t})},t.onTime=function(t,i){e.options.onTime&&"object"==typeof e.options.onTime&&Object.keys(e.options.onTime).indexOf(t)>-1&&-1==e.env.onTimeRised.indexOf(t)&&(f=e.options.onTime[t],e.env.onTimeRised.push(t),n.inArray(typeof f,["string","function"])>-1?("string"==typeof f&&(f=window[f]),f(e,t),e.debug({"Callback onTime":t+" "+typeof f+" raised"})):e.debug({"Callback onTime":t+" "+typeof f+" is not a function, but: "+typeof f}))}},JuliaPlayer.prototype._Controls=function(e){this.press=function(t,n){switch(n=n||{},t){case"play":e.Ui.state(e.env.preloader,"","on"),e.env.buttons.bigPlay.hide(),!1!==e.options.onPlay&&e.Callback.fn(e.options.onPlay,n),!1===e.env.started?e.Source.load():e.env.api.play();break;case"pause":!1!==e.options.onPause&&e.Callback.fn(e.options.onPause,n),e.env.api.pause();break;case"stop":!1!==e.options.onStop&&e.Callback.fn(e.options.onStop,n),e.env.api.pause(),e.env.api.currentTime=0,e.Ui.state(e.env.buttons.play,"pause","play"),e.Ui.icon(e.env.buttons.play,"julia-pause","julia-play"),e.env.buttons.bigPlay.show(),e.env.sliders.progress.update(0);break;case"goto":e.Ui.state(e.env.preloader,"","on"),n.currentTime=isNaN(Number(parseFloat(n.currentTime)))?0:Number(parseFloat(n.currentTime)),e.env.api.currentTime=n.currentTime,!1!==e.options.onPosition&&e.Callback.fn(e.options.onPosition,n);break;case"setDuration":n.duration=isNaN(Number(parseFloat(n.duration)))?0:Number(parseFloat(n.duration)),e.Ui.panel(e.env.panels.duration,e.Timecode.toHuman(n.duration));break;case"volume":e.options.volume=n.volume,e.env.api.volume=parseFloat(n.volume/100),e.env.sliders.volume.update(n.volume),n.volume>0?e.Controls.press("sound-on"):e.Controls.press("sound-off");break;case"sound-on":e.env.api.muted=!1,e.options.muted=!1,e.Persist.set("julia-player-volume",e.options.volume,999),e.Persist.set("julia-player-muted",0,999),e.Ui.state(e.env.buttons.sound,"off","on"),e.Ui.icon(e.env.buttons.sound,"julia-sound-off","julia-sound-on");break;case"sound-off":e.env.api.muted=!0,e.options.muted=!0,e.Persist.set("julia-player-volume",e.options.volume,999),e.Persist.set("julia-player-muted",1,999),e.Ui.state(e.env.buttons.sound,"on","off"),e.Ui.icon(e.env.buttons.sound,"julia-sound-on","julia-sound-off");break;case"fullscreen-on":e.Fullscreen.reset(),e.Fullscreen.on();break;case"fullscreen-off":e.Fullscreen.reset(),e.Fullscreen.off()}}},JuliaPlayer.prototype._Events=function(e){var i=this;i.init=function(){},i.ui=function(){e.env.toolbarBottom.off().on("contextmenu",function(e){e.stopPropagation(),e.preventDefault()}).on("click",".julia-play.play",function(t){t.preventDefault(),e.Controls.press("play")}).on("click",".julia-play.pause",function(t){t.preventDefault(),e.Controls.press("pause")}).on("click",".julia-sound.on",function(t){t.preventDefault(),e.Controls.press("sound-off")}).on("click",".julia-sound.off",function(t){t.preventDefault(),e.Controls.press("sound-on")}).on("click",".julia-fullscreen.on",function(t){t.preventDefault(),e.Controls.press("fullscreen-on")}).on("click",".julia-fullscreen.off",function(t){t.preventDefault(),e.Controls.press("fullscreen-off")}).on("click",".julia-settings",function(t){t.preventDefault(),e.env.menus.settings.hasClass("on")?e.Ui.state(e.env.menus.settings,"on",""):e.Ui.state(e.env.menus.settings,"","on")}),e.env.toolbarTop.off().on("contextmenu",function(e){e.stopPropagation(),e.preventDefault()}),e.env.menus.speed.off().on("change",".julia-dropdown-select",function(t){t.preventDefault(),isNaN(Number(n(this).val()))||(e.env.api.playbackRate=parseFloat(Number(n(this).val())))}),e.env.menus.video.off().on("change",".julia-dropdown-select",function(t){t.preventDefault(),e.debug({"Video bitrate: ":Number(n(this).val())}),"-1"==Number(n(this).val())?e.Switcher.setAutoBitrate("video",!0):(e.Switcher.setAutoBitrate("video",!1),e.Switcher.setBitrate("video",Number(n(this).val())))}),e.env.menus.audio.off().on("change",".julia-dropdown-select",function(t){t.preventDefault(),"-1"==Number(n(this).val())?e.Switcher.setAutoBitrate("audio",!0):(e.Switcher.setAutoBitrate("audio",!1),e.Switcher.setBitrate("audio",Number(n(this).val())))}),e.env.menus.audioTracks.off().on("change",".julia-dropdown-select",function(t){t.preventDefault(),isNaN(Number(n(this).val()))||(e.env.audioTrackActive=Number(n(this).val()),e.debug({trackIndex:e.env.audioTrackActive}),e.Switcher.setTrack("audio",e.env.audioTrackActive))}),e.env.menus.subtitles.off().on("change",".julia-dropdown-select",function(i){i.preventDefault(),isNaN(Number(n(this).val()))||(t=e.Switcher.getTracks("text"),e.env.textTrackActive=Number(n(this).val()),e.debug({trackIndex:e.env.textTrackActive,trackObj:t[e.env.textTrackActive]}),e.Subtitles.setTrack(e.env.textTrackActive))}),e.env.buttons.bigPlay.off().on("click contextmenu",function(t){t.preventDefault(),t.stopPropagation(),"click"==t.type&&e.Controls.press("play")}),e.env.shield.off().on("dblclick click contextmenu",function(t){t.preventDefault(),t.stopPropagation(),e.Ui.state(e.env.menus.settings,"on",""),"click"==t.type&&!0===e.options.pauseOnClick&&!1===e.Support.isMobile()&&(!1===e.env.api.paused?e.Controls.press("pause"):e.Controls.press("play")),"dblclick"==t.type&&(e.env.instance.hasClass("julia-fullscreen-on")?e.Controls.press("fullscreen-off"):e.Controls.press("fullscreen-on"))});var i;e.env.instance.off("mousemove touchmove",".julia-shield, .julia-suggest").off("mouseover mousemove touchmove mouseout",".julia-toolbar-top.julia-toolbar-visible, .julia-toolbar-bottom.julia-toolbar-visible, .julia-menu-settings.on").on("mousemove touchmove",".julia-shield, .julia-suggest",function(t){t.preventDefault(),!0===e.env.started&&(e.env.toolbarBottom.addClass("julia-toolbar-visible"),e.options.source.title.length>0&&e.env.toolbarTop.addClass("julia-toolbar-visible")),clearTimeout(i),i=setTimeout(function(){!0===e.env.started&&(e.env.toolbarBottom.removeClass("julia-toolbar-visible"),e.options.source.title.length>0&&e.env.toolbarTop.removeClass("julia-toolbar-visible"),e.Ui.state(e.env.menus.settings,"on",""))},1750)}).on("mouseover mousemove touchmove mouseout",".julia-toolbar-top.julia-toolbar-visible, .julia-toolbar-bottom.julia-toolbar-visible, .julia-menu-settings.on",function(t){t.preventDefault(),!0===e.env.started&&(e.env.toolbarBottom.addClass("julia-toolbar-visible"),e.options.source.title.length>0&&e.env.toolbarTop.addClass("julia-toolbar-visible")),clearTimeout(i),["mouseout","touchend"].lastIndexOf(t.type.toLowerCase())>-1&&(i=setTimeout(function(t){!0===e.env.started&&(e.env.toolbarBottom.removeClass("julia-toolbar-visible"),e.options.source.title.length>0&&e.env.toolbarTop.removeClass("julia-toolbar-visible"),e.Ui.state(e.env.menus.settings,"on",""))},1750))}),n("body").off("julia.progress-change","#julia-"+e.env.ID).on("julia.progress-change","#julia-"+e.env.ID,function(t,n){!0===e.env.started&&(seekTo=e.Timecode.toSeconds(n.percent),seekTo=seekTo>=e.env.api.duration?e.env.api.duration:seekTo,e.Controls.press("goto",{currentTime:seekTo}))}),n("body").off("julia.volume-change","#julia-"+e.env.ID).on("julia.volume-change","#julia-"+e.env.ID,function(t,n){e.Controls.press("volume",{volume:n.percent})}),n(window).on("resize",function(){e.Support.resize()})},i.native=function(){e.env.api.onplay=function(t){e.Ui.state(e.env.buttons.play,"play","pause"),e.Ui.icon(e.env.buttons.play,"julia-play","julia-pause"),e.env.buttons.bigPlay.hide(),e.env.sliders.progress.buffered(),e.Ui.state(e.env.suggest,"on",""),clearTimeout(e.env.suggestTimer),e.env.startupGoto>0&&(seekTo=e.Timecode.toSeconds(e.env.startupGoto),seekTo=seekTo>=e.env.api.duration?e.env.api.duration:seekTo,e.env.startupGoto=0,e.Controls.press("goto",{currentTime:seekTo}))},e.env.api.onplaying=function(t){e.Ui.state(e.env.buttons.play,"play","pause"),e.Ui.icon(e.env.buttons.play,"julia-play","julia-pause"),e.env.sliders.progress.buffered(),e.Ui.state(e.env.preloader,"on",""),e.Ui.state(e.env.suggest,"on",""),e.env.started=!0,clearTimeout(e.env.suggestTimer),e.env.errorRecoveryAttempts=0,e.Controls.press("setDuration",{duration:e.env.api.duration})},e.env.api.onpause=function(t){e.Ui.state(e.env.buttons.play,"pause","play"),e.Ui.icon(e.env.buttons.play,"julia-pause","julia-play"),setTimeout(function(){!0!==e.env.api.paused&&!0!==e.env.api.ended||e.env.buttons.bigPlay.show()},400)},window.onerror=function(e){},e.env.api.onerror=function(t){e.debug({"Error event":t.type,Attempts:e.env.errorRecoveryAttempts,"Attempt limit":e.env.errorRecoveryAttemptLimit}),e.Source.recover()},e.env.api.onabort=function(t){e.debug({"Error event":t.type,Attempts:e.env.errorRecoveryAttempts,"Attempt limit":e.env.errorRecoveryAttemptLimit},!0),e.Source.recover()},e.env.api.onemptied=function(t){e.debug({"Error event":t.type,Attempts:e.env.errorRecoveryAttempts,"Attempt limit":e.env.errorRecoveryAttemptLimit},!0),e.Source.recover()},e.env.api.onstalled=function(t){e.debug({"Error event":t.type,Attempts:e.env.errorRecoveryAttempts,"Attempt limit":e.env.errorRecoveryAttemptLimit},!0),e.Source.recover()},e.env.api.onsuspend=function(t){e.debug({"Error event":t.type,Attempts:e.env.errorRecoveryAttempts,"Attempt limit":e.env.errorRecoveryAttemptLimit},!0),e.Source.recover()},e.env.api.onloadeddata=function(e){},e.env.api.oncanplaythrough=function(t){e.Controls.press("setDuration",{duration:e.env.api.duration}),"hls"!=e.env.mode&&"dash"!=e.env.mode&&(!0!==e.env.continuePlayback&&!0!==e.options.autoplay||!0!==e.env.api.paused&&!0!==e.env.api.ended||!1!==e.Support.isMobile()||!1!==e.env.started||e.env.api.play())},e.env.api.onloadedmetadata=function(t){e.Support.resize()},e.env.api.ontimeupdate=function(t){currentTimeReadable=e.Timecode.toHuman(e.env.api.currentTime),!1===e.env.api.seeking&&(e.env.sliders.progress.update(e.Timecode.toPercents(e.env.api.currentTime)),e.Ui.panel(e.env.panels.currentTime,currentTimeReadable)),e.env.sliders.progress.buffered(),e.env.errorRecoveryAttempts=0,e.Callback.onTime(currentTimeReadable,e.env.api.currentTime)},e.env.api.onseeked=function(e){},e.env.api.onseeking=function(t){e.Ui.state(e.env.preloader,"","on")},e.env.api.onvolumechange=function(t){!1===e.env.api.muted?e.env.sliders.volume.update(100*e.env.api.volume):e.env.sliders.volume.update(0)},e.env.api.ondurationchange=function(t){e.Controls.press("setDuration",{duration:e.env.api.duration})},e.env.api.onended=function(t){e.Controls.press("stop"),e.Suggest.run()},n(window).on("resize",function(){e.Support.resize()})},i.hlsLibEvents=function(){"hls"==e.env.mode&&(e.env.hls.on(e.env.context.Hls.Events.MEDIA_ATTACHED,function(t,n){e.env.hls.loadSource(e.options.source.file)}),e.env.hls.on(e.env.context.Hls.Events.MANIFEST_PARSED,function(t,n){bitratesVideo=e.Switcher.getBitrateList("video"),tracksAudio=e.Switcher.getTracks("audio"),e.debug({"Stream is initialized and ready":t,"Video bitrate list":bitratesVideo,"Audio track list":tracksAudio,"ABR video bitrate":e.Switcher.getAutoBitrate("video"),"Video bitrate":e.Switcher.getBitrate("video")}),"object"==typeof bitratesVideo&&bitratesVideo&&bitratesVideo.length>1?(e.Ui.state(e.env.menus.video,"","on"),active=!0===e.Switcher.getAutoBitrate("video")?-1:e.Switcher.getBitrate("video"),menuItems=e.Switcher.prepareBitrateMenu(bitratesVideo,[{active:active,value:-1,title:e.options.i18n.auto}],active),e.Ui.menu(e.env.menus.video,menuItems),e.Ui.menuDisabled(e.env.menus.video,!1)):(e.Ui.state(e.env.menus.video,"on",""),e.Ui.menuDisabled(e.env.menus.video,!0)),"object"==typeof tracksAudio&&tracksAudio&&tracksAudio.length>0?(e.Ui.state(e.env.menus.audioTracks,"","on"),active=e.env.audioTrackActive,menuItems=e.Switcher.prepareTrackMenu(tracksAudio,[],active),e.Ui.menu(e.env.menus.audioTracks,menuItems),e.Ui.menuDisabled(e.env.menus.audioTracks,!1)):(e.Ui.state(e.env.menus.audioTracks,"on",""),e.Ui.menuDisabled(e.env.menus.audioTracks,!0)),!0===e.env.continuePlayback&&!0===e.env.started&&e.env.api.play()}),e.env.hls.on(e.env.context.Hls.Events.LEVEL_LOADED,function(t,n){tracksAudio=e.Switcher.getTracks("audio"),"object"==typeof tracksAudio&&tracksAudio&&tracksAudio.length>1?(e.Ui.state(e.env.menus.audioTracks,"","on"),active=e.env.audioTrackActive,menuItems=e.Switcher.prepareTrackMenu(tracksAudio,[],active),e.Ui.menu(e.env.menus.audioTracks,menuItems),e.Ui.menuDisabled(e.env.menus.audioTracks,!1)):(e.Ui.state(e.env.menus.audioTracks,"on",""),e.Ui.menuDisabled(e.env.menus.audioTracks,!0))}),e.env.hls.on(e.env.context.Hls.Events.ERROR,function(t,n){if(e.debug({"Recovering Hls Error":n.details,ErrorType:n.type,ErrorFatal:n.fatal,Data:n,Attempts:e.env.errorRecoveryAttempts,"Attempt limit":e.env.errorRecoveryAttemptLimit},!0),e.env.errorRecoveryAttempts>=e.env.errorRecoveryAttemptLimit){if(!0===n.fatal)switch(n.type){case e.env.context.Hls.ErrorTypes.NETWORK_ERROR:e.env.hls.startLoad();break;case e.env.context.Hls.ErrorTypes.MEDIA_ERROR:e.env.errorRecoveryAttempts>e.env.errorRecoveryAttemptLimit/10&&e.env.hls.swapAudioCodec(),e.env.hls.recoverMediaError();break;default:e.env.hls.startLoad()}e.env.errorRecoveryAttempts++}else e.Source.recover()}))},i.dashLibEvents=function(){"dash"==e.env.mode&&Object.keys(e.env.context.dashjs.MediaPlayer.events).map(function(t,n){e.env.dash.on(e.env.context.dashjs.MediaPlayer.events[t],function(n){switch(n.type){case e.env.context.dashjs.MediaPlayer.events.ERROR:e.debug({"Recovering Dash Error":t,ErrorType:n.type,Error:n.error,Data:n,Attempts:e.env.errorRecoveryAttempts,"Attempt limit":e.env.errorRecoveryAttemptLimit},!0),"download"===n.error?e.Source.recover(!0):e.Source.recover();break;case e.env.context.dashjs.MediaPlayer.events.PLAYBACK_ERROR:case e.env.context.dashjs.MediaPlayer.events.BUFFER_EMPTY:case e.env.context.dashjs.MediaPlayer.events.FRAGMENT_LOADING_ABANDONED:e.debug({"Recovering Dash Error":t,ErrorType:n.type,Data:n,Attempts:e.env.errorRecoveryAttempts,"Attempt limit":e.env.errorRecoveryAttemptLimit},!0),e.Source.recover();break;case e.env.context.dashjs.MediaPlayer.events.MANIFEST_LOADED:e.debug({"Dash Manifest loaded":n}),e.env.dashInitialized=!0,!0===e.env.continuePlayback&&!0===e.env.started&&e.env.api.play();break;case e.env.context.dashjs.MediaPlayer.events.STREAM_INITIALIZED:bitratesVideo=e.Switcher.getBitrateList("video"),bitratesAudio=e.Switcher.getBitrateList("audio"),tracksAudio=e.Switcher.getTracks("audio"),e.debug({"Stream is initialized and ready":n,"Video bitrate list":e.Switcher.getBitrateList("video"),"Audio bitrate list":e.Switcher.getBitrateList("audio"),"Audio track list":e.Switcher.getTracks("audio"),"ABR video bitrate":e.Switcher.getAutoBitrate("video"),"ABR audio bitrate":e.Switcher.getAutoBitrate("audio"),"Video bitrate":e.Switcher.getBitrate("video"),"Audio bitrate":e.Switcher.getBitrate("audio")}),Object.keys(e.options.dashConfig).indexOf("setRichBufferThreshold")>-1&&e.env.dash.setRichBufferThreshold(e.options.dashConfig.setRichBufferThreshold),Object.keys(e.options.dashConfig).indexOf("setBufferToKeep")>-1&&e.env.dash.setBufferToKeep(e.options.dashConfig.setBufferToKeep),Object.keys(e.options.dashConfig).indexOf("setBufferPruningInterval")>-1&&e.env.dash.setBufferPruningInterval(e.options.dashConfig.setBufferPruningInterval),Object.keys(e.options.dashConfig).indexOf("setBufferTimeAtTopQuality")>-1&&e.env.dash.setBufferTimeAtTopQuality(e.options.dashConfig.setBufferTimeAtTopQuality),Object.keys(e.options.dashConfig).indexOf("setScheduleWhilePaused")>-1&&e.env.dash.setScheduleWhilePaused(e.options.dashConfig.setScheduleWhilePaused),Object.keys(e.options.dashConfig).indexOf("setStableBufferTime")>-1&&e.env.dash.setStableBufferTime(e.options.dashConfig.setStableBufferTime),e.env.dash.setFastSwitchEnabled(!0),"object"==typeof bitratesVideo&&bitratesVideo&&bitratesVideo.length>1?(e.Ui.state(e.env.menus.video,"","on"),active=!0===e.Switcher.getAutoBitrate("video")?-1:e.Switcher.getBitrate("video"),menuItems=e.Switcher.prepareBitrateMenu(bitratesVideo,[{active:active,value:-1,title:e.options.i18n.auto}],active),e.Ui.menu(e.env.menus.video,menuItems),e.Ui.menuDisabled(e.env.menus.video,!1)):(e.Ui.state(e.env.menus.video,"on",""),e.Ui.menuDisabled(e.env.menus.video,!0)),"object"==typeof bitratesAudio&&bitratesAudio&&bitratesAudio.length>1?(e.Ui.state(e.env.menus.audio,"","on"),active=!0===e.Switcher.getAutoBitrate("audio")?-1:e.Switcher.getBitrate("audio"),menuItems=e.Switcher.prepareBitrateMenu(bitratesAudio,[],active),e.Ui.menu(e.env.menus.audio,menuItems),e.Ui.menuDisabled(e.env.menus.audio,!1)):(e.Ui.state(e.env.menus.audio,"on",""),e.Ui.menuDisabled(e.env.menus.audio,!0)),"object"==typeof tracksAudio&&tracksAudio&&tracksAudio.length>1?(e.Ui.state(e.env.menus.audioTracks,"","on"),active=e.env.audioTrackActive,menuItems=e.Switcher.prepareTrackMenu(tracksAudio,[],active),e.Ui.menu(e.env.menus.audioTracks,menuItems),e.Ui.menuDisabled(e.env.menus.audioTracks,!1)):(e.Ui.state(e.env.menus.audioTracks,"on",""),e.Ui.menuDisabled(e.env.menus.audioTracks,!0));break;case e.env.context.dashjs.MediaPlayer.events.TEXT_TRACK_ADDED:tracksText=e.Switcher.getTracks("text"),e.debug({"Text track list":e.Switcher.getTracks("text")}),"object"==typeof tracksText&&tracksText&&tracksText.length>0?(e.Ui.state(e.env.menus.subtitles,"","on"),active=e.env.textTrackActive,menuItems=e.Switcher.prepareTrackMenu(tracksText,e.options.i18n.textItems,active),e.Ui.menu(e.env.menus.subtitles,menuItems),e.Ui.menuDisabled(e.env.menus.subtitles,!1)):(e.Ui.state(e.env.menus.subtitles,"on",""),e.Ui.menuDisabled(e.env.menus.subtitles,!0));break;default:e.debug({"Dash Event":t,EventType:n.type,Data:n,Attempts:e.env.errorRecoveryAttempts,"Attempt limit":e.env.errorRecoveryAttemptLimit})}})})}},JuliaPlayer.prototype._Fullscreen=function(e){var t=this;t.on=function(){e.env.fullscreenFrame.requestFullscreen?e.env.fullscreenFrame.requestFullscreen():e.env.fullscreenFrame.msRequestFullscreen?e.env.fullscreenFrame.msRequestFullscreen():e.env.fullscreenFrame.mozRequestFullScreen?e.env.fullscreenFrame.mozRequestFullScreen():e.env.fullscreenFrame.webkitRequestFullscreen?e.env.fullscreenFrame.webkitRequestFullscreen():e.debug({Fullscreen:"not supported"})},t.off=function(){document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()},t.landscapeLock=function(t){e.Support.isMobile()&&(screen.orientation&&(sor=screen.orientation),screen.msLockOrientation&&(sor=screen.msLockOrientation),screen.mozLockOrientation&&(sor=screen.mozLockOrientation),"undefined"!=typeof sor&&sor.lock&&"function"==typeof sor.lock&&(!0===t?sor.lock("landscape-primary").catch(function(t){e.debug({"Landscape lock error: ":t},!0)}):sor.unlock&&"function"==typeof sor.unlock&&sor.unlock()))},t.reset=function(){n(document).off("webkitfullscreenchange mozfullscreenchange fullscreenchange MSFullscreenChange"),n(document).on("webkitfullscreenchange mozfullscreenchange fullscreenchange MSFullscreenChange",function(n){document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement?(e.Ui.state(e.env.instance,"julia-fullscreen-off","julia-fullscreen-on"),e.Ui.state(e.env.buttons.fullscreen,"on","off"),e.Ui.icon(e.env.buttons.fullscreen,"julia-fullscreen","julia-fullscreen-exit"),t.landscapeLock(!0),e.debug({"Fullscreen on":"#julia-player-"+e.env.ID})):(e.Ui.state(e.env.instance,"julia-fullscreen-on","julia-fullscreen-off"),e.Ui.state(e.env.buttons.fullscreen,"off","on"),e.Ui.icon(e.env.buttons.fullscreen,"julia-fullscreen-exit","julia-fullscreen"),t.landscapeLock(!1),e.debug({"Fullscreen off":"#julia-player-"+e.env.ID})),e.Support.resize()})}},JuliaPlayer.prototype._Persist=function(e){var t=this;t.set=function(e,t,n){dateObj=new Date,dateObj.setTime(dateObj.getTime()+24*n*60*60*1e3);var i="expires="+dateObj.toUTCString();document.cookie=e+"="+t+"; "+i+"; path=/"},t.get=function(e){for(var e=e+"=",t=document.cookie.split(";"),n=0;n<t.length;n++){for(var i=t[n];" "==i.charAt(0);)i=i.substring(1);if(0==i.indexOf(e))return i.substring(e.length,i.length)}}},JuliaPlayer.prototype._Slider=function(e,t){var i=this,o=!1,s=navigator.userAgent,a=/chrome/i.exec(s),r=/android/i.exec(s),l="ontouchstart"in window&&!(a&&!r),u=function(e){return e>100?100:e<0?0:Math.round(100*e)/100},c=function(e){return u(e/(i.track.innerWidth()/100))},d=function(e){var t=!0===l&&e.originalEvent.touches?e.originalEvent.touches[0].pageX-i.model.offset().left:e.originalEvent.pageX-i.model.offset().left;return percent=c(t),percent},v=function(e){return!0===l&&e.originalEvent.touches?e.originalEvent.touches[0].pageX-i.model.offset().left:e.originalEvent.pageX-i.model.offset().left},p=n('<div class="julia-slider"><div class="julia-slider-track" data-julia-slider-component="track"></div><div class="julia-slider-track-visible" data-julia-slider-component="track-visible"></div><div class="julia-slider-handle" data-julia-slider-component="handle"></div><div class="julia-slider-fill" data-julia-slider-component="fill"></div></div>');return i.model=p.clone(),i.track=i.model.find('[data-julia-slider-component="track"]'),i.trackVisible=i.model.find('[data-julia-slider-component="track-visible"]'),i.handle=i.model.find('[data-julia-slider-component="handle"]'),i.fill=i.model.find('[data-julia-slider-component="fill"]'),i.options={element:{},value:0,event:"",overcall:function(){}},n.extend(!0,i.options,t),i.elem=i.options.element,i.value=i.options.value,i.init=function(){["input"].lastIndexOf(i.elem.prop("tagName").toLowerCase())>-1&&(i.value=u(i.elem.val())),i.elem.after(i.model),i.elem.hide(),i.slide(i.value,!0)},i.update=function(e){!1===o&&i.slide(e,!0)},i.buffered=function(){var t=e.env.api.buffered;i.model.find(".julia-buffer-sequence").remove();for(var o=0;o<t.length;o++){var s=i.model.find(".julia-buffer-sequence-"+o);_percent1=u(e.Timecode.toPercents(t.start(o))),_percent2=u(e.Timecode.toPercents(t.end(o)));var a=i.track.innerWidth()/100*_percent1,r=i.track.innerWidth()/100*_percent2;if(0==s.length){var s=n('<div class="julia-buffer-sequence julia-buffer-sequence-'+o+'"></div>');i.model.append(s)}s.css({left:a+"px",width:r-a+i.handle.innerWidth()+"px"})}},i.slide=function(e,t){void 0===t&&(t=!1),i.value=u(e);var n=i.track.innerWidth()/100*i.value;i.handle.css({left:n+"px"}),i.fill.css({width:n+2+"px"}),i.respond(e,t)},i.respond=function(t,n){void 0===n&&(n=!1),["input"].lastIndexOf(i.elem.prop("tagName").toLowerCase())>-1&&(i.elem.val(i.value),!1===n&&e.event("julia."+i.options.event,e.env.instance,{percent:t})),i.track.innerWidth(i.model.innerWidth()-i.handle.innerWidth())},i.getValue=function(){return i.value},i.sliding=function(){return o},i.fill.on("click ",function(e){i.slide(d(e),!1)}),i.track.on("click",function(e){i.slide(d(e),!1)}),i.trackVisible.on("click",function(e){i.slide(d(e),!1)}),i.model.on("click mouseover mousemove mouseout",function(t){"click"==t.type&&i.slide(d(t),!1),"mouseover"!=t.type&&"mousemove"!=t.type||"progress-change"!=i.options.event||!0!==e.env.started||(pos=d(t),pix=v(t),!1===e.Support.isMobile()&&!1===e.options.source.live&&!0===e.options.thumbs&&e.Thumbs.thumb(e.Timecode.toSeconds(pos)),e.Ui.state(e.env.labels.goto,"","on"),e.Ui.panel(e.env.labels.goto,e.Timecode.toHuman(e.Timecode.toSeconds(pos))),left=pix+"px",border=e.env.labels.goto.innerWidth()/2,pix<border&&(left=border+10+"px"),pix>i.model.innerWidth()-border&&(left=i.model.innerWidth()-border+10+"px"),e.env.labels.goto.css({left:left,"margin-left":-e.env.labels.goto.innerWidth()/2+"px"})),"mouseout"==t.type&&"progress-change"==i.options.event&&e.Ui.state(e.env.labels.goto,"on","")}),i.model.on("mousedown touchstart",function(e){"touchstart"==e.type&&i.slide(d(e),!1),o=!0}),n(document).on("mouseup touchend",function(e){o=!1}),n(document).on("mousemove touchmove",function(e){!0===o&&i.slide(d(e))}),i},JuliaPlayer.prototype._Source=function(e){var t,i=this;i.set=function(o){e.env.errorRecoveryAttempts=0,e.Subtitles.textTracksCleaner(),e.Ui.reset(),e.Ui.state(e.env.preloader,"","on"),e.env.continuePlayback=!1,!1===e.env.api.paused&&(e.env.api.pause(),e.env.continuePlayback=!0),e.env.started=!1,t="object"==typeof e.options.source?e.options.source:{},o="object"==typeof o?o:{},t.file=Object.keys(o).indexOf("file")>-1?o.file.toString():t.file.toString(),t.poster=Object.keys(o).indexOf("poster")>-1?o.poster.toString():t.poster.toString(),t.mode=Object.keys(o).indexOf("mode")>-1?o.mode.toString():t.mode.toString(),t.title=Object.keys(o).indexOf("title")>-1?o.title.toString():t.title.toString(),t.link=Object.keys(o).indexOf("link")>-1?o.link.toString():t.link.toString(),t.live=Object.keys(o).indexOf("live")>-1?o.live:t.live,t.live=void 0!==t.live&&t.live,t.mode=void 0===t.mode?"legacy":t.mode,"hls"===t.mode&&i.modeTest()&&!0!==e.env.context.Hls.isSupported()&&(t.mode="hlsnative"),e.env.mode=t.mode,t.link.toString().length>0?e.Ui.panel(e.env.panels.title,'<a href="'+t.link+'" target="_blank">'+t.title+" &raquo;</a>"):e.Ui.panel(e.env.panels.title,t.title),e.debug({"Api file":t.file,"Api poster":t.poster,"Api mode":t.mode}),e.env.api.poster=t.poster,!0===t.live?e.Ui.state(e.env.toolbarBottom,"","live"):e.Ui.state(e.env.toolbarBottom,"live",""),!0===e.options.muted?e.Controls.press("sound-off"):e.Controls.press("sound-on"),e.Events.native(),n(document).off("julia.api-mode","#julia-"+e.env.ID).on("julia.api-mode","#julia-"+e.env.ID,function(t){
!0!==e.env.continuePlayback&&!0!==e.options.autoplay||!0!==e.env.api.paused&&!0!==e.env.api.ended||!1!==e.env.started||(e.debug({"Trying to load source":e.env.api.src}),e.Source.load())}),i.modeTest()?(e.Ui.notify(""),e.Source.mode()):e.Ui.notify(e.options.i18n.messages.pluginError+" - "+t.mode)},i.modeTest=function(){switch(t.mode){case"hls":return e.Support.isCallable(e.env.context.Hls);case"dash":return e.Support.isCallable(e.env.context.dashjs);default:return!0}},i.mode=function(){try{!1!==e.env.dash&&!0===e.env.dashInitialized&&(e.env.dash.reset(),e.env.dash=!1),!1!==e.env.hls&&!0===e.env.hlsInitialized&&(e.env.hls.destroy(),e.env.hls=!1)}catch(t){e.debug({Error:t},!0)}switch(t.mode){case"dash":e.env.dash=e.env.context.dashjs.MediaPlayer().create();break;case"hls":e.env.hls=new e.env.context.Hls(e.options.hlsConfig)}e.event("julia.api-mode",e.env.instance)},i.load=function(){switch(e.env.continuePlayback=!0,e.Ui.state(e.env.preloader,"","on"),t.mode){case"dash":try{e.env.dash.initialize(e.env.api,t.file,e.options.autoplay),e.env.dash.getDebug().setLogToBrowserConsole(e.options.playbackDebug),e.Events.dashLibEvents(),e.event("julia.api-load",e.env.instance)}catch(t){e.debug({Error:t},!0),i.recover(!0)}break;case"hls":try{e.env.hls.autoLevelCapping=-1,e.env.hls.attachMedia(e.env.api),e.Events.hlsLibEvents(),e.env.hlsInitialized=!0,e.event("julia.api-load",e.env.instance)}catch(t){e.debug({Error:t},!0),i.recover(!0)}break;default:try{e.env.api.src=t.file,e.env.api.load(),e.event("julia.api-load",e.env.instance)}catch(t){e.debug({Error:t},!0),i.recover(!0)}}!1!==e.env.started&&!0!==e.options.autoplay||i.firstPlay()},i.recover=function(t){t=void 0!==t&&!0===t&&t,e.debug({"Playback recovery force":t,Attempts:e.env.errorRecoveryAttempts,"Attempt Limit":e.env.errorRecoveryAttemptLimit}),e.env.errorRecoveryAttempts>0?(e.Ui.state(e.env.preloader,"","on"),e.env.toolbarBottom.removeClass("julia-toolbar-visible")):e.Ui.state(e.env.preloader,"on",""),e.env.errorRecoveryAttempts>=e.env.errorRecoveryAttemptLimit||!0===t?e.Source.set():e.env.errorRecoveryAttempts++},i.firstPlay=function(){!1===e.Support.isMobile()?setTimeout(function(){e.env.api.readyState>2?e.env.api.play():i.firstPlay()},300):setTimeout(function(){e.env.api.play(),setTimeout(function(){e.env.api.readyState<2&&!0===e.env.api.paused&&(e.Ui.state(e.env.buttons.play,"pause","play"),e.Ui.icon(e.env.buttons.play,"julia-pause","julia-play"))},300)},300)}},JuliaPlayer.prototype._Suggest=function(e){this.run=function(){if(e.env.suggest.html(""),e.env.suggestClicked=!1,e.env.buttons.bigPlay.hide(),e.options.suggest.length>0){x=0;for(var t in e.options.suggest)x<e.options.suggestLimit&&!1===e.options.suggest[t].played&&(live=!(!e.options.suggest[t].live||!0!==e.options.suggest[t].live),file=e.options.suggest[t].file?e.options.suggest[t].file:"",poster=e.options.suggest[t].poster?e.options.suggest[t].poster:"",title=e.options.suggest[t].title?e.options.suggest[t].title:"",link=e.options.suggest[t].link?e.options.suggest[t].link:"",mode=e.options.suggest[t].mode?e.options.suggest[t].mode:"legacy",posterImage=poster.length>0?'<img src="'+poster+'" width="100%" height="100%">':"",suggestItemWidget=n('<div class="julia-suggest-item" data-item-poster="'+poster+'" data-item-file="'+file+'" data-item-link="'+link+'" data-mode="'+mode+'" data-item-title="'+title+'" data-index="'+t+'" data-item-mode="'+mode+'" data-item-live="'+live+'">'+posterImage+'<div class="julia-suggest-item-title">'+title+"</div></div>"),suggestItemWidget.on("click",function(i){e.Ui.state(e.env.preloader,"","on"),!1!==e.options.onSuggest&&e.Callback.fn(e.options.onSuggest,t),e.Thumbs.shadowApi=!1,e.env.suggestClicked=!0,e.options.autoplay=!0,e.Source.set({file:n(this).data("item-file"),poster:n(this).data("item-poster"),title:n(this).data("item-title"),link:n(this).data("item-link"),mode:n(this).data("item-mode"),live:n(this).data("item-live")}),e.debug({suggestRemoveIndex:n(this).data("index"),suggestRemove:n(this).data("item-file")}),e.options.suggest[n(this).data("index")].played=!0,e.Ui.state(e.env.suggest,"on","")}),e.debug({"Suggest item":suggestItemWidget}),e.env.suggest.append(suggestItemWidget),x++);x>0&&(e.options.suggestTimeout>0&&(e.env.suggestTimer=setTimeout(function(){!1===e.env.suggestClicked&&e.env.suggest.find("div.julia-suggest-item:first").click()},e.options.suggestTimeout)),e.Ui.state(e.env.suggest,"","on"))}else e.Fullscreen.off();e.debug({Suggest:"raised"+e.options.suggest.length})}},JuliaPlayer.prototype._Support=function(e){var t=this;t.aspect=function(e,t){return e>0&&t>0?t/e:0},t.bitrate=function(e){var t=-1,n=["kbps","Mbps","Gbps"];do{e/=1e3,t++}while(e>1e3);return Math.max(e,.1).toFixed(1)+n[t]},t.forceReadyState=function(){return!!/Firefox/i.test(navigator.userAgent)},t.isCallable=function(e){return!(!e||"object"!=typeof e&&"function"!=typeof e)},t.isMobile=function(){return!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile/i.test(navigator.userAgent)},t.iOS=function(){return!(!/iPad|iPhone|iPod/.test(navigator.userAgent)||window.MSStream)},t.isVisible=function(){var t=document.querySelector("#julia-"+e.env.ID).getBoundingClientRect(),n=Math.max(document.documentElement.clientHeight,window.innerHeight);return!(t.bottom<0||t.top-n>=0)},t.canPlayMedia=function(){return e.env.canPlayMediaString="legacy"==e.env.mode?e.env.api.canPlayType("video/mp4"):e.env.api.canPlayType("application/vnd.apple.mpegURL"),e.env.canPlayMedia="probably"==e.env.canPlayMediaString||"maybe"==e.env.canPlayMediaString,e.env.canPlayMedia},t.resize=function(){t.fixParentSize(),document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement?(t.aspect(dimensions[0],dimensions[1]),dimensions=[screen.width,screen.height]):dimensions=!0===e.options.responsive?t.getSize():[e.env.element.width(),e.env.element.height()],e.env.api.setAttribute("width",dimensions[0]),e.env.api.setAttribute("height",dimensions[1]),dimensions=[e.env.api.getAttribute("width"),e.env.api.getAttribute("height")],e.env.instance.width(dimensions[0]),e.env.instance.height(dimensions[1]),e.env.wrapper.width(dimensions[0]),e.env.wrapper.height(dimensions[1]),e.env.dimensions.width=dimensions[0],e.env.dimensions.height=dimensions[1],n(".julia-toolbar-bottom-"+e.env.ID+":not(.live) .julia-panel.julia-currentTime, .julia-toolbar-bottom-"+e.env.ID+":not(.live) .julia-panel.julia-duration").css({display:dimensions[0]<360?"none":"block"})},t.fixParentSize=function(){"inline"==e.env.element.parent().css("display").toLowerCase()&&e.env.element.parent().css({display:"block"})},t.getSize=function(){var n=e.env.element.parent().width();for(i in e.options.dimensions)if(dim=e.options.dimensions[i],n>=dim[0])return dimensions=[dim[0],dim[0]*t.aspect(dim[0],dim[1])],dimensions;return dimensions=[n,n*t.aspect(dim[0],dim[1])],dimensions}},JuliaPlayer.prototype._Subtitles=function(e){var t=this;t.setTrack=function(t){switch(e.env.mode){case"dash":return e.env.dash.setTextTrack(t)}},t.textTracksCleaner=function(){var t=e.env.api.textTracks;if(t&&t.length&&t.length>0&&t.length>0)for(i in t)track=t[i],track&&track.kind&&("subtitles"==track.kind||"captions"==track.kind)&&(track.mode="disabled")}},JuliaPlayer.prototype._Switcher=function(e){var n=this;n.getBitrateList=function(t){switch(e.env.mode){case"dash":return e.env.dash.getBitrateInfoListFor(t);case"hls":return e.env.hls.levels;default:return[]}},n.getBitrate=function(t){switch(e.env.mode){case"dash":return e.env.dash.getQualityFor(t);case"hls":return e.env.hls.currentLevel;default:return 0}},n.setBitrate=function(t,n){switch(e.env.mode){case"dash":e.env.dash.setQualityFor(t,n);break;case"hls":e.env.hls.currentLevel=n}},n.getAutoBitrate=function(t){switch(e.env.mode){case"dash":return e.env.dash.getAutoSwitchQualityFor(t);case"hls":return e.env.hls.autoLevelEnabled;default:return!0}},n.setAutoBitrate=function(t,n){switch(e.env.mode){case"dash":e.env.dash.setAutoSwitchQualityFor(t,n);break;case"hls":"video"==t&&!0===n&&(e.env.hls.currentLevel=-1)}},n.getTracks=function(t){switch(e.env.mode){case"dash":return e.env.dash.getTracksFor(t);case"hls":return e.env.hls.audioTracks}},n.setTrack=function(n,i){switch(e.env.mode){case"dash":t=e.Switcher.getTracks(n),e.env.dash.setCurrentTrack(t[i]);break;case"hls":e.env.hls.audioTrack=i}},n.prepareTrackMenu=function(t,n,o){switch(n="object"!=typeof n?[]:n,o="number"!=typeof o?1:o,e.env.mode){case"dash":for(i in t)n.push({active:o,value:i,title:t[i].lang});break;case"hls":for(i in t)n.push({active:o,value:i,title:t[i].name?t[i].name:t[i].lang})}return n},n.prepareBitrateMenu=function(t,n,o){switch(n="object"!=typeof n?[]:n,o="number"!=typeof o?0:o,e.env.mode){case"dash":for(i in t)n.push({active:o,value:t[i].qualityIndex,title:e.Support.bitrate(t[i].bitrate)});break;case"hls":for(i in t)n.push({active:o,value:i,title:e.Support.bitrate(t[i].bitrate)})}return n}},JuliaPlayer.prototype._Timecode=function(e){var n=this;n.toPercents=function(t){return duration=e.env.api.duration,(isNaN(duration)||"number"!=typeof Number(duration))&&(duration=0),(isNaN(t)||"number"!=typeof Number(t))&&(t=0),duration>0?t/duration*100:0},n.toSeconds=function(t){return duration=e.env.api.duration,(isNaN(duration)||"number"!=typeof Number(duration))&&(duration=0),(isNaN(t)||"number"!=typeof Number(t))&&(t=0),duration/100*t},n.toNum=function(e){return e=e.split(":"),e.reverse(),s=parseInt(e[0]),m=e.length>1?parseInt(e[1]):0,h=e.length>2?parseInt(e[3]):0,t=s+60*m+60*h*60,t},n.toHuman=function(e){return(isNaN(e)||"number"!=typeof Number(e))&&(e=0),e=e.toString().split("."),s=e[0],H=Math.floor(s/3600),M=Math.floor((s-3600*H)/60),S=Math.floor(s-3600*H-60*M),H=("0"+H.toString()).slice(-2),M=("0"+M.toString()).slice(-2),S=("0"+S.toString()).slice(-2),str=H>0?H+":"+M+":"+S:M+":"+S,str}},JuliaPlayer.prototype._Thumbs=function(e){var t=this;t.shadowApi=!1,t.canvas=!1,t.context=!1,t.imageThumb=!1,t.imageCache={},t.dim=function(t){var n=[e.env.instance.width(),e.env.instance.height()];return[128,n[1]/n[0]*128]},t.thumb=function(n){var o=t.dim(i),s=Math.floor(o[0]),a=Math.floor(o[1]);!1===t.shadowApi&&(t.imageCache={},e.env.labels.goto.css({width:o[0]+10+"px",height:40+o[1]+10+"px",overflow:"hidden"}),t.canvas=document.createElement("canvas"),t.canvas.width=s,t.canvas.height=a,t.context=t.canvas.getContext("2d"),t.imageThumb=document.createElement("img"),t.imageThumb.style.width=s+"px",t.imageThumb.style.height=a+"px",e.env.labels.goto.find("img").remove(),e.env.labels.goto.append(t.imageThumb),t.shadowApi=e.env.api.cloneNode(!0),t.shadowApi.width=s,t.shadowApi.height=a,t.shadowApi.preload="auto","hls"===e.env.mode?t.hls=new Hls(e.options.hlsConfig):"dash"===e.env.mode||(t.shadowApi.src=e.options.source.file),"hls"===e.env.mode?(t.hls.autoLevelCapping=-1,t.hls.attachMedia(t.shadowApi),t.hls.loadSource(e.options.source.file)):"dash"===e.env.mode?(t.dash=dashjs.MediaPlayer().create(),t.dash.initialize(),t.dash.attachView(t.shadowApi),t.dash.attachSource(e.options.source.file),t.dash.setAutoPlay(!1),t.dash.getDebug().setLogToBrowserConsole(!1)):t.shadowApi.load()),e.env.thumbsOk=!1,index=Math.floor(n),index in t.imageCache?t.image(s,a,index):(t.shadowApi.currentTime=index,t.image(s,a,index))},t.image=function(n,i,o){o in t.imageCache?(t.imageThumb.src=t.imageCache[o],e.env.thumbsOk=!0):4==parseInt(t.shadowApi.readyState)?(t.context.drawImage(t.shadowApi,0,0,n,i),dataURL=t.canvas.toDataURL(),null!=dataURL&&void 0!=dataURL&&(t.cache(o,dataURL),t.imageThumb.src=dataURL),e.env.thumbsOk=!0):setTimeout(function(){t.image(n,i,o)},70)},t.cache=function(e,n){return e in t.imageCache?t.imageCache[e]:(t.imageCache[e]=n,n)}},JuliaPlayer.prototype._Ui=function(e){var t=this;t.create=function(){e.env.instance.length>0&&e.env.instance.remove(),platformClass=!1===e.Support.isMobile()?"julia-desktop":"julia-mobile",e.env.instance=n('<div class="julia-player off julia-fullscreen-off julia-'+e.env.ID+" "+platformClass+'" id="julia-'+e.env.ID+'"></div>'),e.env.wrapper=n('<div class="julia-wrapper"><video class="julia-video" id="julia-api-'+e.env.ID+'" preload="auto" webkit-playsinline playsinline></video></div>'),e.env.shield=n('<div class="julia-shield" id="julia-shield-'+e.env.ID+'"></div>'),e.env.preloader=n('<div class="julia-preloader"></div>'),e.env.suggest=n('<div class="julia-suggest" id="julia-suggest-'+e.env.ID+'"></div>'),e.env.toolbarTop=n('<div class="julia-toolbar julia-toolbar-top" id="julia-toolbar-top-'+e.env.ID+'"></div>'),e.env.toolbarBottom=n('<div class="julia-toolbar julia-toolbar-bottom" id="julia-toolbar-bottom-'+e.env.ID+'"></div>'),e.env.notifier=n('<div class="julia-notifier" id="julia-notifier-'+e.env.ID+'"></div>'),e.env.buttons.bigPlay=n('<button class="julia-btn julia-big-play"><i class="julia-icon julia-play-circle"></i></button>'),e.env.buttons.play=n('<button class="julia-btn julia-play play">    <i class="julia-icon julia-play"></i></button>'),e.env.buttons.next=n('<button class="julia-btn julia-next" title="'+e.env.i18n.next+'">    <i class="julia-icon julia-chevron-right"></i></button>'),e.env.buttons.previous=n('<button class="julia-btn julia-previous" title="'+e.env.i18n.previous+'">    <i class="julia-icon julia-chevron-left"></i></button>'),e.env.buttons.close=n('<button class="julia-btn julia-close" title="'+e.env.i18n.close+'">    <i class="julia-icon julia-close"></i></button>'),e.env.buttons.fullscreen=n('<button class="julia-btn julia-fullscreen on">    <i class="julia-icon julia-fullscreen"></i></button>'),e.env.buttons.sound=n('<button class="julia-btn julia-sound on">    <i class="julia-icon julia-sound-on"></i></button>'),e.env.buttons.settings=n('<button class="julia-btn julia-settings off">    <i class="julia-icon julia-gear"></i></button>'),e.env.ranges.volume=n('<div class="julia-volume">  <input type="range" value="'+e.options.volume+'" min="0" max="100" step="1" class="julia-range"></div>'),e.env.ranges.progress=n('<div class="julia-progress">  <input type="range" value="0" min="0" max="100" step="'+e.env.progressStep+'" class="julia-range"></div>'),e.env.labels.goto=n('<div class="julia-label julia-label-goto">    <span>00:00:00</span></div>'),e.env.menus.settings=n('<div class="julia-menu julia-menu-settings">    <div class="julia-menu-title">'+e.options.i18n.settings+"</div>    <table><tbody></tbody></table>NaN"),e.env.menus.video=n('<tr class="julia-menu-item julia-menu-item-video"><td class="julia-menu-item-title">'+e.options.i18n.video+'</td><td><div class="julia-dropdown"><select name="video" class="julia-dropdown-select" disabled="disabled"></select></div></td></tr>'),e.env.menus.audio=n('<tr class="julia-menu-item julia-menu-item-audio"><td class="julia-menu-item-title">'+e.options.i18n.audio+'</td><td><div class="julia-dropdown"><select name="audio" class="julia-dropdown-select" disabled="disabled"></select></div></td></tr>'),e.env.menus.audioTracks=n('<tr class="julia-menu-item julia-menu-item-audioTracks"><td class="julia-menu-item-title">'+e.options.i18n.audioTracks+'</td><td><div class="julia-dropdown"><select name="audioTracks" class="julia-dropdown-select" disabled="disabled"></select></div></td></tr>'),e.env.menus.subtitles=n('<tr class="julia-menu-item julia-menu-item-subtitles"><td class="julia-menu-item-title">'+e.options.i18n.subtitles+'</td><td><div class="julia-dropdown"><select name="subtitles" class="julia-dropdown-select" disabled="disabled"></select></div></td></tr>'),e.env.menus.speed=n('<tr class="julia-menu-item julia-menu-item-speed on"><td class="julia-menu-item-title">'+e.options.i18n.speed+'</td><td><div class="julia-dropdown"><select name="speed" class="julia-dropdown-select"></select></div></td></tr>'),e.env.panels.title=n('<div class="julia-panel julia-title">    <span></span></div>'),e.env.panels.live=n('<div class="julia-panel julia-live-indicator">    <span>'+e.options.i18n.liveText+"</span></div>"),e.env.panels.currentTime=n('<div class="julia-panel julia-currentTime">    <span>00:00:00</span></div>'),e.env.panels.duration=n('<div class="julia-panel julia-duration">    <span>00:00:00</span></div>'),e.env.toolbarBottom.append([e.env.buttons.play,e.env.buttons.sound,e.env.buttons.fullscreen,e.env.buttons.settings,e.env.ranges.progress,e.env.ranges.volume,e.env.panels.currentTime,e.env.panels.duration,e.env.labels.goto]),e.env.toolbarTop.append([e.env.panels.title]),e.env.menus.settings.find("tbody").append([e.env.menus.video,e.env.menus.audio,e.env.menus.audioTracks,e.env.menus.speed,e.env.menus.subtitles]),e.Ui.menu(e.env.menus.speed,e.options.i18n.speedItems),e.env.wrapper.append([e.env.shield,e.env.suggest,e.env.notifier,e.env.buttons.bigPlay,e.env.preloader,e.env.toolbarTop,e.env.toolbarBottom,e.env.menus.settings]),!0===e.options.autoplay&&!1===e.Support.isMobile()&&e.env.buttons.bigPlay.hide(),e.env.instance.append([e.env.wrapper]),e.env.element.append(e.env.instance),e.debug({"Julia instance created":e.env.instance,"Julia instance appended to":e.env.element}),setTimeout(function(){e.env.api=document.getElementById("julia-api-"+e.env.ID),e.env.api.controls=!1,e.debug({"Api object":"julia-api-"+e.env.ID}),t.zIndexize(),e.Ui.state(e.env.instance,"","on"),e.event("julia.ui-created",e.env.instance)},250)},t.icon=function(e,t,n){e.find("i").removeClass(t).addClass(n)},t.state=function(e,t,n){e.removeClass(t).addClass(n)},t.panel=function(e,t){e.find("span").html(t)},t.notify=function(n){e.env.notifier.html(n),n.length>0?t.state(e.env.notifier,"","on"):t.state(e.env.notifier,"on","")},t.reset=function(){e.Ui.state(e.env.menus.video,"on",""),e.Ui.menuDisabled(e.env.menus.video,!0),e.Ui.state(e.env.menus.audio,"on",""),e.Ui.menuDisabled(e.env.menus.audio,!0),e.Ui.state(e.env.menus.audioTracks,"on",""),e.Ui.menuDisabled(e.env.menus.audioTracks,!0),e.Ui.state(e.env.menus.subtitles,"on",""),e.Ui.menuDisabled(e.env.menus.subtitles,!0)},t.menu=function(e,t){e.find("select>option").remove();for(i in t)s=n('<option value="'+t[i].value+'">'+t[i].title+"</option>"),Object.keys(t[i]).indexOf("active")>-1&&t[i].value==t[i].active&&s.prop("selected",!0),e.find("select").append(s)},t.menuDisabled=function(e,t){e.find("select").prop("disabled",t)},t.zIndexize=function(){var t=e.options.zIndexStart,i=[e.env.instance,e.env.wrapper,n("#julia-api-"+e.env.ID),e.env.preloader,e.env.shield,e.env.toolbarTop,e.env.toolbarBottom,e.env.suggest,e.env.menus.settings,e.env.buttons.bigPlay,e.env.notifier];i.map(function(e,n){return i[n].css({"z-index":t+n}),e})}},function(e){e.extend({juliaPlayer:function(e){return new JuliaPlayer(e)}})}(n),jQuery.fn.juliaPlayer=function(e){var t=[];return this.each(function(){if(!n(this).data("juliaplayer")){e="object"==typeof e?e:{},e.source={file:n(this).prop("src")?n(this).prop("src"):n(this).find("source").prop("src"),poster:n(this).prop("poster")?n(this).prop("poster"):"",title:n(this).data("title")?n(this).data("title"):"",link:n(this).data("link")?n(this).data("link"):"",mode:n(this).data("mode")?n(this).data("mode"):"legacy",live:!(!n(this).data("live")||"true"!=n(this).data("live").toString().toLowerCase())},e.element=n(this).parent(),e.pluginMode=!0,n(this).css({display:"none"});var i=new JuliaPlayer(e);n(this).data("juliaplayer",i),t.push(i)}}),t}});